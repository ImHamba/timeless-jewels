var Ul=Object.defineProperty;var Bl=(t,e,l)=>e in t?Ul(t,e,{enumerable:!0,configurable:!0,writable:!0,value:l}):t[e]=l;var Ee=(t,e,l)=>(Bl(t,typeof e!="symbol"?e+"":e,l),l);import{s as Ze,r as pt,f as A,a as j,g as R,h as O,d as k,c as J,j as y,k as Ye,i as V,D as E,H as St,I as Ce,u as vt,v as bt,w as wt,F as nt,J as Fl,o as Ml,K as Ot,L as Hl,M as Y,p as lt,y as He,N as Pl,e as Se,A as zl,z as b,l as X,x as ke,m as G,n as we,G as st,E as et,O as me,B as Tt,C as tt,P as Dt,Q as Vt}from"../chunks/scheduler.a4661fe7.js";import{S as xe,i as $e,a as q,t as F,g as Ne,c as Oe,b as qe,d as je,m as Je,e as Ue,f as Et}from"../chunks/index.0ccbc0e6.js";import{e as Le,u as Kl,o as Yl,g as Xl,S as Ct}from"../chunks/navigation.c97e7369.js";import{r as Gl,h as Wl}from"../chunks/singletons.7e36e9ce.js";import{b as Ql,a as Xe,d as zt,t as jt,c as rt,o as Jt,e as yt,f as Ut,i as Bt,g as Ft,h as Zl,j as Ht,k as qt,m as xl,n as ft,p as $l,s as es,q as ts,r as ls}from"../chunks/worker.ea151058.js";import{c as Nl,d as se}from"../chunks/index.098253ec.js";import{p as ss}from"../chunks/stores.bbfcb8bf.js";const Ol=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;class is{constructor(){Ee(this,"currentLayerId");Ee(this,"setups");Ee(this,"renderers");Ee(this,"dispatchers");Ee(this,"needsSetup");Ee(this,"needsRedraw");Ee(this,"context");Ee(this,"width");Ee(this,"height");Ee(this,"autoclear");Ee(this,"pixelRatio");Ee(this,"renderLoop");Ee(this,"layerObserver");Ee(this,"layerRef");Ee(this,"layerSequence");Ee(this,"renderingLayerId");Ee(this,"activeLayerId");Ee(this,"activeLayerDispatcher");this.register=this.register.bind(this),this.unregister=this.unregister.bind(this),this.redraw=this.redraw.bind(this),this.getRenderingLayerId=this.getRenderingLayerId.bind(this),this.currentLayerId=1,this.setups=new Map,this.renderers=new Map,this.dispatchers=new Map,this.needsSetup=!1,this.needsRedraw=!0,this.renderingLayerId=0,this.activeLayerId=0,this.layerSequence=[]}redraw(){this.needsRedraw=!0}register({setup:e,render:l,dispatcher:i}){return e&&(this.setups.set(this.currentLayerId,e),this.needsSetup=!0),this.renderers.set(this.currentLayerId,l),this.dispatchers.set(this.currentLayerId,i),this.needsRedraw=!0,this.currentLayerId++}unregister(e){this.renderers.delete(e),this.dispatchers.delete(e),this.needsRedraw=!0}setup(e,l){this.context=e,this.layerRef=l,this.observeLayerSequence(),this.startRenderLoop()}observeLayerSequence(){this.layerObserver=new MutationObserver(this.getLayerSequence.bind(this)),this.layerObserver.observe(this.layerRef,{childList:!0}),this.getLayerSequence()}getLayerSequence(){const e=[...this.layerRef.children];this.layerSequence=e.map(l=>+(l.dataset.layerId??-1)),this.redraw()}startRenderLoop(){this.render(),this.renderLoop=requestAnimationFrame(()=>this.startRenderLoop())}render(){var s;const e=this.context,l=this.width,i=this.height,n=this.pixelRatio;if(this.needsSetup){for(const[r,u]of this.setups)u({context:e,width:l,height:i}),this.setups.delete(r);this.needsSetup=!1}if(this.needsRedraw){e.setTransform(n,0,0,n,0,0),this.autoclear&&e.clearRect(0,0,l,i);for(const r of this.layerSequence)this.renderingLayerId=r,(s=this.renderers.get(r))==null||s({context:e,width:l,height:i});this.needsRedraw=!1}}setActiveLayer(e,l){this.activeLayerId!==e&&(l instanceof MouseEvent&&(this.dispatchLayerEvent(new PointerEvent("pointerleave",l)),this.dispatchLayerEvent(new MouseEvent("mouseleave",l))),this.activeLayerId=e,this.activeLayerDispatcher=this.dispatchers.get(e),l instanceof MouseEvent&&(this.dispatchLayerEvent(new PointerEvent("pointerenter",l)),this.dispatchLayerEvent(new MouseEvent("mouseenter",l))))}dispatchLayerEvent(e){if(this.activeLayerDispatcher){if(window.TouchEvent&&e instanceof TouchEvent){const{left:l,top:i}=e.target.getBoundingClientRect(),{clientX:n,clientY:s}=e.changedTouches[0],r={x:n-l,y:s-i,originalEvent:e};this.activeLayerDispatcher(e.type,r)}else if(e instanceof MouseEvent){const l={x:e.offsetX,y:e.offsetY,originalEvent:e};this.activeLayerDispatcher(e.type,l)}}}getRenderingLayerId(){return this.renderingLayerId}destroy(){typeof window>"u"||(this.layerObserver.disconnect(),cancelAnimationFrame(this.renderLoop))}}const ns=t=>{const e=t*2,l=e>>16&255,i=e>>8&255,n=e&255;return`rgb(${l}, ${i}, ${n})`},rs=(t,e,l)=>{const i=(t<<16|e<<8|l)/2;return i%1?0:i},as=["drawImage"],os=["filter","shadowBlur","globalCompositeOperation","globalAlpha"],us=["drawImage","fill","fillRect","fillText","stroke","strokeRect","strokeText"],fs=t=>{let e;const l=document.createElement("canvas"),i=l.getContext("2d",{willReadFrequently:!0}),n=()=>{l.width=t.canvas.width,l.height=t.canvas.height};return new MutationObserver(n).observe(t.canvas,{attributeFilter:["width","height"]}),n(),new Proxy(t,{get(r,u){if(u==="_getLayerIdAtPixel")return(o,h)=>{const[g,m,_]=i.getImageData(o,h,1,1).data;return rs(g,m,_)};const a=r[u];return typeof a!="function"?a:function(...o){if(us.includes(u)){const h=ns(e());i.fillStyle=h,i.strokeStyle=h}if(u==="drawImage"){const h=o.slice(1);i.fillRect(...h)}return as.includes(u)||Reflect.apply(a,i,o),Reflect.apply(a,r,o)}},set(r,u,a){return u==="_renderingLayerId"?(e=a,!0):(r[u]=a,os.includes(u)||(i[u]=a),!0)}})};function cs(t){let e,l,i,n=`${t[0]}px`,s=`${t[1]}px`,r,u,a,o,h;const g=t[18].default,m=pt(g,t,t[17],null);return{c(){e=A("canvas"),r=j(),u=A("div"),m&&m.c(),this.h()},l(_){e=R(_,"CANVAS",{width:!0,height:!0,class:!0,style:!0}),O(e).forEach(k),r=J(_),u=R(_,"DIV",{});var f=O(u);m&&m.l(f),f.forEach(k),this.h()},h(){y(e,"width",l=t[0]*t[5]),y(e,"height",i=t[1]*t[5]),y(e,"class",t[4]),y(e,"style",t[2]),Ye(e,"display","block"),Ye(e,"width",n),Ye(e,"height",s),Ye(u,"display","none")},m(_,f){V(_,e,f),t[64](e),V(_,r,f),V(_,u,f),m&&m.m(u,null),t[65](u),a=!0,o||(h=[E(e,"touchstart",St(function(){Ce(t[3]?t[9]:null)&&(t[3]?t[9]:null).apply(this,arguments)})),E(e,"mousemove",function(){Ce(t[3]?t[8]:null)&&(t[3]?t[8]:null).apply(this,arguments)}),E(e,"pointermove",function(){Ce(t[3]?t[8]:null)&&(t[3]?t[8]:null).apply(this,arguments)}),E(e,"click",function(){Ce(t[3]?t[10]:null)&&(t[3]?t[10]:null).apply(this,arguments)}),E(e,"contextmenu",function(){Ce(t[3]?t[10]:null)&&(t[3]?t[10]:null).apply(this,arguments)}),E(e,"dblclick",function(){Ce(t[3]?t[10]:null)&&(t[3]?t[10]:null).apply(this,arguments)}),E(e,"mousedown",function(){Ce(t[3]?t[10]:null)&&(t[3]?t[10]:null).apply(this,arguments)}),E(e,"mouseenter",function(){Ce(t[3]?t[10]:null)&&(t[3]?t[10]:null).apply(this,arguments)}),E(e,"mouseleave",function(){Ce(t[3]?t[10]:null)&&(t[3]?t[10]:null).apply(this,arguments)}),E(e,"mouseup",function(){Ce(t[3]?t[10]:null)&&(t[3]?t[10]:null).apply(this,arguments)}),E(e,"wheel",function(){Ce(t[3]?t[10]:null)&&(t[3]?t[10]:null).apply(this,arguments)}),E(e,"touchcancel",St(function(){Ce(t[3]?t[10]:null)&&(t[3]?t[10]:null).apply(this,arguments)})),E(e,"touchend",St(function(){Ce(t[3]?t[10]:null)&&(t[3]?t[10]:null).apply(this,arguments)})),E(e,"touchmove",St(function(){Ce(t[3]?t[10]:null)&&(t[3]?t[10]:null).apply(this,arguments)})),E(e,"pointerenter",function(){Ce(t[3]?t[10]:null)&&(t[3]?t[10]:null).apply(this,arguments)}),E(e,"pointerleave",function(){Ce(t[3]?t[10]:null)&&(t[3]?t[10]:null).apply(this,arguments)}),E(e,"pointerdown",function(){Ce(t[3]?t[10]:null)&&(t[3]?t[10]:null).apply(this,arguments)}),E(e,"pointerup",function(){Ce(t[3]?t[10]:null)&&(t[3]?t[10]:null).apply(this,arguments)}),E(e,"pointercancel",function(){Ce(t[3]?t[10]:null)&&(t[3]?t[10]:null).apply(this,arguments)}),E(e,"focus",t[19]),E(e,"blur",t[20]),E(e,"fullscreenchange",t[21]),E(e,"fullscreenerror",t[22]),E(e,"scroll",t[23]),E(e,"cut",t[24]),E(e,"copy",t[25]),E(e,"paste",t[26]),E(e,"keydown",t[27]),E(e,"keypress",t[28]),E(e,"keyup",t[29]),E(e,"auxclick",t[30]),E(e,"click",t[31]),E(e,"contextmenu",t[32]),E(e,"dblclick",t[33]),E(e,"mousedown",t[34]),E(e,"mouseenter",t[35]),E(e,"mouseleave",t[36]),E(e,"mousemove",t[37]),E(e,"mouseover",t[38]),E(e,"mouseout",t[39]),E(e,"mouseup",t[40]),E(e,"select",t[41]),E(e,"wheel",t[42]),E(e,"drag",t[43]),E(e,"dragend",t[44]),E(e,"dragenter",t[45]),E(e,"dragstart",t[46]),E(e,"dragleave",t[47]),E(e,"dragover",t[48]),E(e,"drop",t[49]),E(e,"touchcancel",t[50]),E(e,"touchend",t[51]),E(e,"touchmove",t[52]),E(e,"touchstart",t[53]),E(e,"pointerover",t[54]),E(e,"pointerenter",t[55]),E(e,"pointerdown",t[56]),E(e,"pointermove",t[57]),E(e,"pointerup",t[58]),E(e,"pointercancel",t[59]),E(e,"pointerout",t[60]),E(e,"pointerleave",t[61]),E(e,"gotpointercapture",t[62]),E(e,"lostpointercapture",t[63])],o=!0)},p(_,f){t=_,(!a||f[0]&33&&l!==(l=t[0]*t[5]))&&y(e,"width",l),(!a||f[0]&34&&i!==(i=t[1]*t[5]))&&y(e,"height",i),(!a||f[0]&16)&&y(e,"class",t[4]),(!a||f[0]&4)&&y(e,"style",t[2]);const c=f[0]&4;c&&Ye(e,"display","block"),(c||f[0]&5&&n!==(n=`${t[0]}px`))&&Ye(e,"width",n),(c||f[0]&6&&s!==(s=`${t[1]}px`))&&Ye(e,"height",s),m&&m.p&&(!a||f[0]&131072)&&vt(m,g,t,t[17],a?wt(g,t[17],f,null):bt(t[17]),null)},i(_){a||(q(m,_),a=!0)},o(_){F(m,_),a=!1},d(_){_&&(k(e),k(r),k(u)),t[64](null),m&&m.d(_),t[65](null),o=!1,nt(h)}}}const Dl=Symbol(),hs=()=>Hl(Dl);function ds(t,e,l){let i,{$$slots:n={},$$scope:s}=e,{width:r=640,height:u=640,pixelRatio:a=null,style:o="",autoclear:h=!0,layerEvents:g=!1}=e,{class:m=""}=e,_,f=null,c;const d=new is;function p(){d.redraw()}function w(){return _}function I(){return f}a==null&&(typeof window<"u"?a=window.devicePixelRatio:a=2),Fl(Dl,{register:d.register,unregister:d.unregister,redraw:d.redraw}),Ml(()=>{const S=_.getContext("2d");g?(f=fs(S),f._renderingLayerId=d.getRenderingLayerId):f=S,d.setup(f,c)}),Ot(()=>d.destroy());const C=S=>{const dt=S.offsetX*i,mt=S.offsetY*i,_t=f._getLayerIdAtPixel(dt,mt);d.setActiveLayer(_t,S),d.dispatchLayerEvent(S)},P=S=>{const{clientX:dt,clientY:mt}=S.changedTouches[0],{left:_t,top:Rt}=_.getBoundingClientRect(),Lt=(dt-_t)*i,Mt=(mt-Rt)*i,Pt=f._getLayerIdAtPixel(Lt,Mt);d.setActiveLayer(Pt,S),d.dispatchLayerEvent(S)},L=S=>{window.TouchEvent&&S instanceof TouchEvent&&S.preventDefault(),d.dispatchLayerEvent(S)};function z(S){Y.call(this,t,S)}function M(S){Y.call(this,t,S)}function D(S){Y.call(this,t,S)}function B(S){Y.call(this,t,S)}function H(S){Y.call(this,t,S)}function $(S){Y.call(this,t,S)}function W(S){Y.call(this,t,S)}function he(S){Y.call(this,t,S)}function Ae(S){Y.call(this,t,S)}function ce(S){Y.call(this,t,S)}function Q(S){Y.call(this,t,S)}function pe(S){Y.call(this,t,S)}function ze(S){Y.call(this,t,S)}function ve(S){Y.call(this,t,S)}function U(S){Y.call(this,t,S)}function ee(S){Y.call(this,t,S)}function ne(S){Y.call(this,t,S)}function N(S){Y.call(this,t,S)}function v(S){Y.call(this,t,S)}function Z(S){Y.call(this,t,S)}function re(S){Y.call(this,t,S)}function te(S){Y.call(this,t,S)}function de(S){Y.call(this,t,S)}function ie(S){Y.call(this,t,S)}function ye(S){Y.call(this,t,S)}function _e(S){Y.call(this,t,S)}function Me(S){Y.call(this,t,S)}function ue(S){Y.call(this,t,S)}function K(S){Y.call(this,t,S)}function x(S){Y.call(this,t,S)}function oe(S){Y.call(this,t,S)}function ae(S){Y.call(this,t,S)}function De(S){Y.call(this,t,S)}function Be(S){Y.call(this,t,S)}function Ge(S){Y.call(this,t,S)}function fe(S){Y.call(this,t,S)}function Ie(S){Y.call(this,t,S)}function Ke(S){Y.call(this,t,S)}function Fe(S){Y.call(this,t,S)}function Pe(S){Y.call(this,t,S)}function Ve(S){Y.call(this,t,S)}function at(S){Y.call(this,t,S)}function ct(S){Y.call(this,t,S)}function ht(S){Y.call(this,t,S)}function ot(S){Y.call(this,t,S)}function ut(S){lt[S?"unshift":"push"](()=>{_=S,l(6,_)})}function At(S){lt[S?"unshift":"push"](()=>{c=S,l(7,c)})}return t.$$set=S=>{"width"in S&&l(0,r=S.width),"height"in S&&l(1,u=S.height),"pixelRatio"in S&&l(11,a=S.pixelRatio),"style"in S&&l(2,o=S.style),"autoclear"in S&&l(12,h=S.autoclear),"layerEvents"in S&&l(3,g=S.layerEvents),"class"in S&&l(4,m=S.class),"$$scope"in S&&l(17,s=S.$$scope)},t.$$.update=()=>{t.$$.dirty[0]&2048&&l(5,i=a??1),t.$$.dirty[0]&1&&l(16,d.width=r,d),t.$$.dirty[0]&2&&l(16,d.height=u,d),t.$$.dirty[0]&32&&l(16,d.pixelRatio=i,d),t.$$.dirty[0]&4096&&l(16,d.autoclear=h,d),t.$$.dirty[0]&71683&&d.redraw()},[r,u,o,g,m,i,_,c,C,P,L,a,h,p,w,I,d,s,n,z,M,D,B,H,$,W,he,Ae,ce,Q,pe,ze,ve,U,ee,ne,N,v,Z,re,te,de,ie,ye,_e,Me,ue,K,x,oe,ae,De,Be,Ge,fe,Ie,Ke,Fe,Pe,Ve,at,ct,ht,ot,ut,At]}class ms extends xe{constructor(e){super(),$e(this,e,ds,cs,Ze,{width:0,height:1,pixelRatio:11,style:2,autoclear:12,layerEvents:3,class:4,redraw:13,getCanvas:14,getContext:15},null,[-1,-1,-1])}get redraw(){return this.$$.ctx[13]}get getCanvas(){return this.$$.ctx[14]}get getContext(){return this.$$.ctx[15]}}function _s(t){let e;return{c(){e=A("div"),this.h()},l(l){e=R(l,"DIV",{"data-layer-id":!0}),O(e).forEach(k),this.h()},h(){y(e,"data-layer-id",t[0])},m(l,i){V(l,e,i)},p:He,i:He,o:He,d(l){l&&k(e)}}}function gs(t,e,l){const{register:i,unregister:n,redraw:s}=hs(),r=Pl();let{setup:u=void 0}=e,{render:a=()=>{}}=e;const o=i({setup:u,render:a,dispatcher:r});return Ot(()=>n(o)),t.$$set=h=>{"setup"in h&&l(1,u=h.setup),"render"in h&&l(2,a=h.render)},t.$$.update=()=>{t.$$.dirty&4&&s()},[o,u,a]}class ps extends xe{constructor(e){super(),$e(this,e,gs,_s,Ze,{setup:1,render:2})}}let Kt;const Vl=Date.now(),ql=t=>(t(Date.now()-Vl),Kt=window.requestAnimationFrame(()=>ql(t)),()=>window.cancelAnimationFrame(Kt));function vs(){}const bs=Gl(Date.now()-Vl,typeof window>"u"?vs:ql),{window:Nt}=Ol;function Yt(t){let e,l,i,n,s,r;l=new ms({props:{width:t[0],height:t[1],$$slots:{default:[ws]},$$scope:{ctx:t}}}),l.$on("pointerdown",t[5]),l.$on("wheel",t[8]);const u=t[26].default,a=pt(u,t,t[27],null);return{c(){e=A("div"),qe(l.$$.fragment),i=j(),a&&a.c(),this.h()},l(o){e=R(o,"DIV",{style:!0});var h=O(e);je(l.$$.fragment,h),i=J(h),a&&a.l(h),h.forEach(k),this.h()},h(){Ye(e,"touch-action","none"),Ye(e,"cursor",t[2])},m(o,h){V(o,e,h),Je(l,e,null),b(e,i),a&&a.m(e,null),n=!0,s||(r=E(e,"resize",t[9]),s=!0)},p(o,h){const g={};h[0]&1&&(g.width=o[0]),h[0]&2&&(g.height=o[1]),h[0]&134217736&&(g.$$scope={dirty:h,ctx:o}),l.$set(g),a&&a.p&&(!n||h[0]&134217728)&&vt(a,u,o,o[27],n?wt(u,o[27],h,null):bt(o[27]),null),(!n||h[0]&4)&&Ye(e,"cursor",o[2])},i(o){n||(q(l.$$.fragment,o),q(a,o),n=!0)},o(o){F(l.$$.fragment,o),F(a,o),n=!1},d(o){o&&k(e),Ue(l),a&&a.d(o),s=!1,r()}}}function ws(t){let e,l;return e=new ps({props:{render:t[3]}}),{c(){qe(e.$$.fragment)},l(i){je(e.$$.fragment,i)},m(i,n){Je(e,i,n),l=!0},p(i,n){const s={};n[0]&8&&(s.render=i[3]),e.$set(s)},i(i){l||(q(e.$$.fragment,i),l=!0)},o(i){F(e.$$.fragment,i),l=!1},d(i){Ue(e,i)}}}function ks(t){let e,l,i,n,s=t[0]&&t[1]&&Yt(t);return{c(){s&&s.c(),e=Se()},l(r){s&&s.l(r),e=Se()},m(r,u){s&&s.m(r,u),V(r,e,u),l=!0,i||(n=[E(Nt,"pointerup",t[6]),E(Nt,"pointermove",t[7]),E(Nt,"resize",t[9])],i=!0)},p(r,u){r[0]&&r[1]?s?(s.p(r,u),u[0]&3&&q(s,1)):(s=Yt(r),s.c(),q(s,1),s.m(e.parentNode,e)):s&&(Ne(),F(s,1,1,()=>{s=null}),Oe())},i(r){l||(q(s),l=!0)},o(r){F(s),l=!1},d(r){r&&k(e),s&&s.d(r),i=!1,nt(n)}}}const Xt="25px Roboto Mono",Gt="17px Roboto Mono",Wt=2.6;function Ss(t,e,l){let i,n,s,{$$slots:r={},$$scope:u}=e,{clickNode:a}=e,{circledNode:o}=e,{selectedJewel:h}=e,{selectedConqueror:g}=e,{seed:m}=e,{highlighted:_=[]}=e,{disabled:f=[]}=e,{highlightJewels:c=!1}=e;const d=Wl(bs,v=>(!_||!_.length)&&!c?0:Math.round(v/40));zl(t,d,v=>l(25,s=v));const p=[427,320,226,227,323,422,329];let w=10,I=0,C=0;const P={},L={},z=(v,Z,re,te=!1,de=!1)=>{let ie=te?Zl[Z]:Ht[Z];!ie&&te&&(ie=Ht[Z]);const ye=ie.filename;ye in(te?L:P)||((te?L:P)[ye]=new Image,(te?L:P)[ye].src=ye);const _e=ie.coords[Z],Me=_e.w/w*Wt,ue=_e.h/w*Wt,K=re.x-Me/2,x=re.y-ue/2;let oe=x;de&&(oe=x-ue/2),v.drawImage((te?L:P)[ye],_e.x,_e.y,_e.w,_e.h,K,oe,Me,ue),de&&(v.save(),v.translate(K,x),v.rotate(Math.PI),v.drawImage((te?L:P)[ye],_e.x,_e.y,_e.w,_e.h,-Me,-(ue/2),Me,-ue),v.restore())},M=(v,Z,re)=>{const te=[];let de="";return v.split(" ").forEach(ie=>{Z.measureText(de+ie).width<re?de+=" "+ie:(te.push(de.trim()),de=ie)}),de.length>0&&te.push(de.trim()),te};let D={x:Number.MIN_VALUE,y:Number.MIN_VALUE},B="unset",H,$=0,W=0,he=0,Ae=0,ce=!1;const Q=v=>{ce=!0,$=v.offsetX,W=v.offsetY,he=I,Ae=C,l(21,D={x:v.offsetX,y:v.offsetY}),H&&a(H)},pe=v=>{v.type==="pointerup"&&(ce=!1),l(21,D={x:v.offsetX,y:v.offsetY})},ze=v=>{ce&&(l(19,I=he-($-v.offsetX)*w),l(20,C=Ae-(W-v.offsetY)*w)),l(21,D={x:v.offsetX,y:v.offsetY})},ve=v=>{v.deltaY>0?w<30&&(l(19,I+=v.offsetX),l(20,C+=v.offsetY)):w>3&&(l(19,I-=v.offsetX),l(20,C-=v.offsetY)),l(18,w=Math.min(30,Math.max(3,w+v.deltaY/100))),v.preventDefault(),v.stopPropagation(),v.stopImmediatePropagation()};let U=0,ee=0;const ne=()=>{l(0,U=window.innerWidth),l(1,ee=window.innerHeight)};let N=!1;return t.$$set=v=>{"clickNode"in v&&l(10,a=v.clickNode),"circledNode"in v&&l(11,o=v.circledNode),"selectedJewel"in v&&l(12,h=v.selectedJewel),"selectedConqueror"in v&&l(13,g=v.selectedConqueror),"seed"in v&&l(14,m=v.seed),"highlighted"in v&&l(15,_=v.highlighted),"disabled"in v&&l(16,f=v.disabled),"highlightJewels"in v&&l(17,c=v.highlightJewels),"$$scope"in v&&l(27,u=v.$$scope)},t.$$.update=()=>{t.$$.dirty[0]&262144&&l(24,i=Ql/w),t.$$.dirty[0]&8650752&&(!N&&Xe&&(l(23,N=!0),l(19,I=Xe.min_x+window.innerWidth/2*w),l(20,C=Xe.min_y+window.innerHeight/2*w)),ne()),t.$$.dirty[0]&58718208&&l(3,n=({context:v,width:Z,height:re})=>{const te=window.performance.now();v.clearRect(0,0,Z,re),v.fillStyle="#080c11",v.fillRect(0,0,Z,re);const de={};Object.keys(zt).forEach(ue=>{const K=zt[ue],x=jt(K.x,K.y,I,C,w),oe=Math.max(...K.orbits);p.indexOf(parseInt(ue))>=0||(oe==1?z(v,"PSGroupBackground1",x,!1):oe==2?z(v,"PSGroupBackground2",x,!1):(oe==3||K.orbits.length>1)&&z(v,"PSGroupBackground3",x,!1,!0))}),Object.keys(rt).forEach(ue=>{var ae;const K=rt[ue],x=Jt(K.orbit,K.orbitIndex),oe=yt(K,I,C,w);(ae=K.out)==null||ae.forEach(De=>{if(!rt[parseInt(De)])return;const Be=Math.min(parseInt(De),parseInt(ue)),Ge=Math.max(parseInt(De),parseInt(ue)),fe=Be+":"+Ge;if(fe in de)return;de[fe]=!0;const Ie=rt[parseInt(De)];if(!Ie||Ie.isMastery)return;const Ke=Jt(Ie.orbit,Ie.orbitIndex),Fe=yt(Ie,I,C,w);if(v.beginPath(),K.group!=Ie.group||K.orbit!=Ie.orbit)v.moveTo(oe.x,oe.y),v.lineTo(Fe.x,Fe.y);else{let Pe=Math.PI/180-Math.PI/180*x,Ve=Math.PI/180-Math.PI/180*Ke;Pe-=Math.PI/2,Ve-=Math.PI/2;const at=Math.abs(Math.max(Pe,Ve)-Math.min(Pe,Ve)),ct=at>Math.PI?Math.max(Pe,Ve):Math.min(Pe,Ve),ht=at>Math.PI?Math.min(Pe,Ve):Math.max(Pe,Ve),ot=zt[K.group],ut=jt(ot.x,ot.y,I,C,w);v.arc(ut.x,ut.y,Xe.constants.orbitRadii[K.orbit]/w+1,ct,ht)}v.lineWidth=6/w,v.strokeStyle="#524518",v.stroke()})});let ie;o&&(ie=yt(rt[o],I,C,w),v.strokeStyle="#ad2b2b");let ye=!1,_e;if(Object.keys(rt).forEach(ue=>{const K=rt[ue],x=yt(K,I,C,w);let oe=0,ae=!1;o&&Ut(x,ie)<i&&(ae=!0),f.indexOf(K.skill)>=0&&(ae=!1),K.isKeystone?(oe=110,z(v,K.icon,x,ae),ae?z(v,"KeystoneFrameAllocated",x,!1):z(v,"KeystoneFrameUnallocated",x,!1)):K.isNotable?(oe=70,z(v,K.icon,x,ae),ae?z(v,"NotableFrameAllocated",x,!1):z(v,"NotableFrameUnallocated",x,!1)):K.isJewelSocket?(oe=70,K.expansionJewel?z(v,"JewelSocketAltNormal",x,!1):ae?z(v,"JewelFrameAllocated",x,!1):z(v,"JewelFrameUnallocated",x,!1)):K.isMastery?z(v,K.inactiveIcon,x,ae):(oe=50,z(v,K.icon,x,ae),ae?z(v,"PSSkillFrameActive",x,!1):z(v,"PSSkillFrame",x,!1)),(_.indexOf(K.skill)>=0||c&&K.isJewelSocket)&&(v.strokeStyle=`hsl(${s}, 100%, 50%)`,v.lineWidth=3,v.beginPath(),v.arc(x.x,x.y,(oe+30)/w,0,Math.PI*2),v.stroke()),Ut(x,D)<oe/w&&(_e=K,ye=ae)}),l(22,H=_e),o&&(v.strokeStyle="#ad2b2b",v.lineWidth=1,v.beginPath(),v.arc(ie.x,ie.y,i,0,Math.PI*2),v.stroke()),H){let ue=H.name,K=(H.stats||[]).map(fe=>({text:fe,special:!1}));if(!H.isJewelSocket&&ye&&H.skill&&m&&h&&g){const fe=Nl.Calculate(se.TreeToPassive[H.skill].Index,m,h,g);fe&&("AlternatePassiveSkill"in fe&&fe.AlternatePassiveSkill&&(K=[],ue=fe.AlternatePassiveSkill.Name,"StatsKeys"in fe.AlternatePassiveSkill&&fe.AlternatePassiveSkill.StatsKeys.forEach((Ie,Ke)=>{const Fe=se.GetStatByIndex(Ie),Pe=Bt[Fe.ID]||"";Pe&&K.push({text:Ft(Pe,fe.StatRolls[Ke])||Fe.ID,special:!0})})),fe.AlternatePassiveAdditionInformations&&fe.AlternatePassiveAdditionInformations.forEach(Ie=>{"StatsKeys"in Ie.AlternatePassiveAddition&&Ie.AlternatePassiveAddition.StatsKeys.forEach((Ke,Fe)=>{const Pe=se.GetStatByIndex(Ke),Ve=Bt[Pe.ID]||"";Ve&&K.push({text:Ft(Ve,Ie.StatRolls[Fe])||Pe.ID,special:!0})})}))}v.font=Xt;const x=v.measureText(ue),oe=Math.max(x.width+50,600);v.font=Gt;const ae=[],De=30;let Be=85;K&&K.length>0?K.forEach(fe=>{ae.length>0&&(Be+=5),fe.text.split(`
`).forEach(Ie=>{ae.length>0&&(Be+=10),M(Ie,v,oe-De).forEach(Fe=>{ae.push({text:Fe,offset:Be,special:fe.special}),Be+=20})})}):H.isJewelSocket&&(ae.push({text:"Click to select this socket",offset:Be,special:!0}),Be+=20);const Ge=55;v.fillStyle="rgba(75,63,24,0.9)",v.fillRect(D.x,D.y,oe,Ge),v.fillStyle="#ffffff",v.font=Xt,v.textAlign="center",v.fillText(ue,D.x+oe/2,D.y+35),v.fillStyle="rgba(0,0,0,0.8)",v.fillRect(D.x,D.y+Ge,oe,Be-Ge),v.font=Gt,v.textAlign="left",ae.forEach(fe=>{fe.special?v.fillStyle="#8cf34c":v.fillStyle="#ffffff",v.fillText(fe.text,D.x+De/2,D.y+fe.offset)})}H&&H.isJewelSocket?l(2,B="pointer"):l(2,B="unset"),v.fillStyle="#ffffff",v.textAlign="right",v.font="12px Roboto Mono";const Me=window.performance.now();v.fillText(`${(Me-te).toFixed(1)}ms`,Z-5,17)})},[U,ee,B,n,d,Q,pe,ze,ve,ne,a,o,h,g,m,_,f,c,w,I,C,D,H,N,i,s,r,u]}class ys extends xe{constructor(e){super(),$e(this,e,Ss,ks,Ze,{clickNode:10,circledNode:11,selectedJewel:12,selectedConqueror:13,seed:14,highlighted:15,disabled:16,highlightJewels:17},null,[-1,-1])}}function Qt(t,e,l){const i=t.slice();return i[6]=e[l],i}function Zt(t,e,l){const i=t.slice();return i[9]=e[l],i}function xt(t){let e,l=ft(t[9],t[6].stats[t[9]])+"",i;return{c(){e=A("li"),i=X(l)},l(n){e=R(n,"LI",{});var s=O(e);i=G(s,l),s.forEach(k)},m(n,s){V(n,e,s),b(e,i)},p(n,s){s&1&&l!==(l=ft(n[9],n[6].stats[n[9]])+"")&&we(i,l)},d(n){n&&k(e)}}}function $t(t){let e,l,i=Xe.nodes[t[6].passive].name+"",n,s,r=t[6].passive+"",u,a,o,h,g,m=Le(Object.keys(t[6].stats)),_=[];for(let f=0;f<m.length;f+=1)_[f]=xt(Zt(t,m,f));return{c(){e=A("div"),l=A("span"),n=X(i),s=X(" ("),u=X(r),a=X(")"),o=j(),h=A("ul");for(let f=0;f<_.length;f+=1)_[f].c();g=j(),this.h()},l(f){e=R(f,"DIV",{class:!0});var c=O(e);l=R(c,"SPAN",{});var d=O(l);n=G(d,i),s=G(d," ("),u=G(d,r),a=G(d,")"),d.forEach(k),o=J(c),h=R(c,"UL",{class:!0});var p=O(h);for(let w=0;w<_.length;w+=1)_[w].l(p);p.forEach(k),g=J(c),c.forEach(k),this.h()},h(){y(h,"class","list-disc pl-6 font-bold"),y(e,"class","mt-2")},m(f,c){V(f,e,c),b(e,l),b(l,n),b(l,s),b(l,u),b(l,a),b(e,o),b(e,h);for(let d=0;d<_.length;d+=1)_[d]&&_[d].m(h,null);b(e,g)},p(f,c){if(c&1&&i!==(i=Xe.nodes[f[6].passive].name+"")&&we(n,i),c&1&&r!==(r=f[6].passive+"")&&we(u,r),c&1){m=Le(Object.keys(f[6].stats));let d;for(d=0;d<m.length;d+=1){const p=Zt(f,m,d);_[d]?_[d].p(p,c):(_[d]=xt(p),_[d].c(),_[d].m(h,null))}for(;d<_.length;d+=1)_[d].d(1);_.length=m.length}},d(f){f&&k(e),st(_,f)}}}function Is(t){let e,l,i,n="Trade",s,r,u,a=t[0].seed+"",o,h,g=t[0].weight+"",m,_,f,c,d="Trade",p,w,I,C=Le(t[0].skills),P=[];for(let L=0;L<C.length;L+=1)P[L]=$t(Qt(t,C,L));return{c(){e=A("div"),l=A("div"),i=A("button"),i.textContent=n,s=j(),r=A("div"),u=X("Seed "),o=X(a),h=X(" (weight "),m=X(g),_=X(")"),f=j(),c=A("button"),c.textContent=d,p=j();for(let L=0;L<P.length;L+=1)P[L].c();this.h()},l(L){e=R(L,"DIV",{class:!0,role:!0,tabindex:!0});var z=O(e);l=R(z,"DIV",{class:!0});var M=O(l);i=R(M,"BUTTON",{class:!0,"data-svelte-h":!0}),ke(i)!=="svelte-1wpptz2"&&(i.textContent=n),s=J(M),r=R(M,"DIV",{class:!0});var D=O(r);u=G(D,"Seed "),o=G(D,a),h=G(D," (weight "),m=G(D,g),_=G(D,")"),D.forEach(k),f=J(M),c=R(M,"BUTTON",{class:!0,"data-svelte-h":!0}),ke(c)!=="svelte-8a6tec"&&(c.textContent=d),M.forEach(k),p=J(z);for(let B=0;B<P.length;B+=1)P[B].l(z);z.forEach(k),this.h()},h(){y(i,"class","px-3 invisible"),y(r,"class","font-bold text-orange-500 text-center"),y(c,"class","px-3 bg-blue-500/40 rounded"),y(l,"class","flex flex-row justify-between"),y(e,"class","my-2 border-white/50 border p-2 flex flex-col cursor-pointer"),y(e,"role","button"),y(e,"tabindex","0")},m(L,z){V(L,e,z),b(e,l),b(l,i),b(l,s),b(l,r),b(r,u),b(r,o),b(r,h),b(r,m),b(r,_),b(l,f),b(l,c),b(e,p);for(let M=0;M<P.length;M+=1)P[M]&&P[M].m(e,null);w||(I=[E(c,"click",t[5]),E(e,"click",t[3]),E(e,"keydown",t[3])],w=!0)},p(L,[z]){if(z&1&&a!==(a=L[0].seed+"")&&we(o,a),z&1&&g!==(g=L[0].weight+"")&&we(m,g),z&1){C=Le(L[0].skills);let M;for(M=0;M<C.length;M+=1){const D=Qt(L,C,M);P[M]?P[M].p(D,z):(P[M]=$t(D),P[M].c(),P[M].m(e,null))}for(;M<P.length;M+=1)P[M].d(1);P.length=C.length}},i:He,o:He,d(L){L&&k(e),st(P,L),w=!1,nt(I)}}}function Ts(t,e,l){let{highlight:i}=e,{set:n}=e,{jewel:s}=e,{conqueror:r}=e;const u=()=>i(n.seed,n.skills.map(o=>o.passive)),a=()=>qt(xl(s,r,n));return t.$$set=o=>{"highlight"in o&&l(4,i=o.highlight),"set"in o&&l(0,n=o.set),"jewel"in o&&l(1,s=o.jewel),"conqueror"in o&&l(2,r=o.conqueror)},[n,s,r,u,i,a]}class jl extends xe{constructor(e){super(),$e(this,e,Ts,Is,Ze,{highlight:4,set:0,jewel:1,conqueror:2})}}const It={AUTO:"auto",START:"start",CENTER:"center",END:"end"},Qe={HORIZONTAL:"horizontal",VERTICAL:"vertical"},gt={OBSERVED:0,REQUESTED:1},Es={[Qe.VERTICAL]:"top",[Qe.HORIZONTAL]:"left"},el={[Qe.VERTICAL]:"scrollTop",[Qe.HORIZONTAL]:"scrollLeft"};class Cs{constructor({itemSize:e,itemCount:l,estimatedItemSize:i}){this.itemSize=e,this.itemCount=l,this.estimatedItemSize=i,this.itemSizeAndPositionData={},this.lastMeasuredIndex=-1,this.checkForMismatchItemSizeAndItemCount(),this.justInTime||this.computeTotalSizeAndPositionData()}get justInTime(){return typeof this.itemSize=="function"}updateConfig({itemSize:e,itemCount:l,estimatedItemSize:i}){l!=null&&(this.itemCount=l),i!=null&&(this.estimatedItemSize=i),e!=null&&(this.itemSize=e),this.checkForMismatchItemSizeAndItemCount(),this.justInTime&&this.totalSize!=null?this.totalSize=void 0:this.computeTotalSizeAndPositionData()}checkForMismatchItemSizeAndItemCount(){if(Array.isArray(this.itemSize)&&this.itemSize.length<this.itemCount)throw Error("When itemSize is an array, itemSize.length can't be smaller than itemCount")}getSize(e){const{itemSize:l}=this;return typeof l=="function"?l(e):Array.isArray(l)?l[e]:l}computeTotalSizeAndPositionData(){let e=0;for(let l=0;l<this.itemCount;l++){const i=this.getSize(l),n=e;e+=i,this.itemSizeAndPositionData[l]={offset:n,size:i}}this.totalSize=e}getLastMeasuredIndex(){return this.lastMeasuredIndex}getSizeAndPositionForIndex(e){if(e<0||e>=this.itemCount)throw Error(`Requested index ${e} is outside of range 0..${this.itemCount}`);return this.justInTime?this.getJustInTimeSizeAndPositionForIndex(e):this.itemSizeAndPositionData[e]}getJustInTimeSizeAndPositionForIndex(e){if(e>this.lastMeasuredIndex){const l=this.getSizeAndPositionOfLastMeasuredItem();let i=l.offset+l.size;for(let n=this.lastMeasuredIndex+1;n<=e;n++){const s=this.getSize(n);if(s==null||isNaN(s))throw Error(`Invalid size returned for index ${n} of value ${s}`);this.itemSizeAndPositionData[n]={offset:i,size:s},i+=s}this.lastMeasuredIndex=e}return this.itemSizeAndPositionData[e]}getSizeAndPositionOfLastMeasuredItem(){return this.lastMeasuredIndex>=0?this.itemSizeAndPositionData[this.lastMeasuredIndex]:{offset:0,size:0}}getTotalSize(){if(this.totalSize)return this.totalSize;const e=this.getSizeAndPositionOfLastMeasuredItem();return e.offset+e.size+(this.itemCount-this.lastMeasuredIndex-1)*this.estimatedItemSize}getUpdatedOffsetForIndex({align:e=It.START,containerSize:l,currentOffset:i,targetIndex:n}){if(l<=0)return 0;const s=this.getSizeAndPositionForIndex(n),r=s.offset,u=r-l+s.size;let a;switch(e){case It.END:a=u;break;case It.CENTER:a=r-(l-s.size)/2;break;case It.START:a=r;break;default:a=Math.max(u,Math.min(r,i))}const o=this.getTotalSize();return Math.max(0,Math.min(o-l,a))}getVisibleRange({containerSize:e=0,offset:l,overscanCount:i}){if(this.getTotalSize()===0)return{};const s=l+e;let r=this.findNearestItem(l);if(r===void 0)throw Error(`Invalid offset ${l} specified`);const u=this.getSizeAndPositionForIndex(r);l=u.offset+u.size;let a=r;for(;l<s&&a<this.itemCount-1;)a++,l+=this.getSizeAndPositionForIndex(a).size;return i&&(r=Math.max(0,r-i),a=Math.min(a+i,this.itemCount-1)),{start:r,stop:a}}resetItem(e){this.lastMeasuredIndex=Math.min(this.lastMeasuredIndex,e-1)}findNearestItem(e){if(isNaN(e))throw Error(`Invalid offset ${e} specified`);e=Math.max(0,e);const l=this.getSizeAndPositionOfLastMeasuredItem(),i=Math.max(0,this.lastMeasuredIndex);return l.offset>=e?this.binarySearch({high:i,low:0,offset:e}):this.exponentialSearch({index:i,offset:e})}binarySearch({low:e,high:l,offset:i}){let n=0,s=0;for(;e<=l;){if(n=e+Math.floor((l-e)/2),s=this.getSizeAndPositionForIndex(n).offset,s===i)return n;s<i?e=n+1:s>i&&(l=n-1)}return e>0?e-1:0}exponentialSearch({index:e,offset:l}){let i=1;for(;e<this.itemCount&&this.getSizeAndPositionForIndex(e).offset<l;)e+=i,i*=2;return this.binarySearch({high:Math.min(e,this.itemCount-1),low:Math.floor(e/2),offset:l})}}const As=t=>({}),tl=t=>({});function ll(t,e,l){const i=t.slice();return i[37]=e[l],i}const Rs=t=>({style:t[0]&4,index:t[0]&4}),sl=t=>({style:t[37].style,index:t[37].index}),Ls=t=>({}),il=t=>({});function nl(t,e){let l,i;const n=e[21].item,s=pt(n,e,e[20],sl);return{key:t,first:null,c(){l=Se(),s&&s.c(),this.h()},l(r){l=Se(),s&&s.l(r),this.h()},h(){this.first=l},m(r,u){V(r,l,u),s&&s.m(r,u),i=!0},p(r,u){e=r,s&&s.p&&(!i||u[0]&1048580)&&vt(s,n,e,e[20],i?wt(n,e[20],u,Rs):bt(e[20]),sl)},i(r){i||(q(s,r),i=!0)},o(r){F(s,r),i=!1},d(r){r&&k(l),s&&s.d(r)}}}function Ms(t){let e,l,i,n=[],s=new Map,r,u;const a=t[21].header,o=pt(a,t,t[20],il);let h=Le(t[2]);const g=f=>f[0]?f[0](f[37].index):f[37].index;for(let f=0;f<h.length;f+=1){let c=ll(t,h,f),d=g(c);s.set(d,n[f]=nl(d,c))}const m=t[21].footer,_=pt(m,t,t[20],tl);return{c(){e=A("div"),o&&o.c(),l=j(),i=A("div");for(let f=0;f<n.length;f+=1)n[f].c();r=j(),_&&_.c(),this.h()},l(f){e=R(f,"DIV",{class:!0,style:!0});var c=O(e);o&&o.l(c),l=J(c),i=R(c,"DIV",{class:!0,style:!0});var d=O(i);for(let p=0;p<n.length;p+=1)n[p].l(d);d.forEach(k),r=J(c),_&&_.l(c),c.forEach(k),this.h()},h(){y(i,"class","virtual-list-inner svelte-1d4hv8l"),y(i,"style",t[4]),y(e,"class","virtual-list-wrapper svelte-1d4hv8l"),y(e,"style",t[3])},m(f,c){V(f,e,c),o&&o.m(e,null),b(e,l),b(e,i);for(let d=0;d<n.length;d+=1)n[d]&&n[d].m(i,null);b(e,r),_&&_.m(e,null),t[22](e),u=!0},p(f,c){o&&o.p&&(!u||c[0]&1048576)&&vt(o,a,f,f[20],u?wt(a,f[20],c,Ls):bt(f[20]),il),c[0]&1048581&&(h=Le(f[2]),Ne(),n=Kl(n,c,g,1,f,h,s,i,Yl,nl,null,ll),Oe()),(!u||c[0]&16)&&y(i,"style",f[4]),_&&_.p&&(!u||c[0]&1048576)&&vt(_,m,f,f[20],u?wt(m,f[20],c,As):bt(f[20]),tl),(!u||c[0]&8)&&y(e,"style",f[3])},i(f){if(!u){q(o,f);for(let c=0;c<h.length;c+=1)q(n[c]);q(_,f),u=!0}},o(f){F(o,f);for(let c=0;c<n.length;c+=1)F(n[c]);F(_,f),u=!1},d(f){f&&k(e),o&&o.d(f);for(let c=0;c<n.length;c+=1)n[c].d();_&&_.d(f),t[22](null)}}}const Ps=(()=>{let t=!1;try{const e=Object.defineProperty({},"passive",{get(){return t={passive:!0},!0}});window.addEventListener("testpassive",e,e),window.remove("testpassive",e,e)}catch{}return t})();function zs(t,e,l){let{$$slots:i={},$$scope:n}=e,{height:s}=e,{width:r="100%"}=e,{itemCount:u}=e,{itemSize:a}=e,{estimatedItemSize:o=null}=e,{stickyIndices:h=null}=e,{getKey:g=null}=e,{scrollDirection:m=Qe.VERTICAL}=e,{scrollOffset:_=null}=e,{scrollToIndex:f=null}=e,{scrollToAlignment:c=null}=e,{scrollToBehaviour:d="instant"}=e,{overscanCount:p=3}=e;const w=Pl(),I=new Cs({itemCount:u,itemSize:a,estimatedItemSize:U()});let C=!1,P,L=[],z={offset:_||f!=null&&L.length&&pe(f)||0,scrollChangeReason:gt.REQUESTED},M=z,D={scrollToIndex:f,scrollToAlignment:c,scrollOffset:_,itemCount:u,itemSize:a,estimatedItemSize:o},B={},H="",$="";Ae(),Ml(()=>{l(18,C=!0),P.addEventListener("scroll",ze,Ps),_!=null?ce(_):f!=null&&ce(pe(f))}),Ot(()=>{C&&P.removeEventListener("scroll",ze)});function W(){if(!C)return;const N=D.scrollToIndex!==f||D.scrollToAlignment!==c,v=D.itemCount!==u||D.itemSize!==a||D.estimatedItemSize!==o;v&&(I.updateConfig({itemSize:a,itemCount:u,estimatedItemSize:U()}),Q()),D.scrollOffset!==_?l(19,z={offset:_||0,scrollChangeReason:gt.REQUESTED}):typeof f=="number"&&(N||v)&&l(19,z={offset:pe(f,c,u),scrollChangeReason:gt.REQUESTED}),D={scrollToIndex:f,scrollToAlignment:c,scrollOffset:_,itemCount:u,itemSize:a,estimatedItemSize:o}}function he(){if(!C)return;const{offset:N,scrollChangeReason:v}=z;(M.offset!==N||M.scrollChangeReason!==v)&&Ae(),M.offset!==N&&v===gt.REQUESTED&&ce(N),M=z}function Ae(){const{offset:N}=z,{start:v,stop:Z}=I.getVisibleRange({containerSize:m===Qe.VERTICAL?s:r,offset:N,overscanCount:p});let re=[];const te=I.getTotalSize();m===Qe.VERTICAL?(l(3,H=`height:${s}px;width:${r};`),l(4,$=`flex-direction:column;height:${te}px;`)):(l(3,H=`height:${s};width:${r}px`),l(4,$=`min-height:100%;width:${te}px;`));const de=h!=null&&h.length!==0;if(de)for(let ie=0;ie<h.length;ie++){const ye=h[ie];re.push({index:ye,style:ee(ye,!0)})}if(v!==void 0&&Z!==void 0){for(let ie=v;ie<=Z;ie++)de&&h.includes(ie)||re.push({index:ie,style:ee(ie,!1)});w("itemsUpdated",{start:v,end:Z})}l(2,L=re)}function ce(N){"scroll"in P?P.scroll({[Es[m]]:N,behavior:d}):l(1,P[el[m]]=N,P)}function Q(N=0){B={},I.resetItem(N),Ae()}function pe(N,v=c,Z=u){return(N<0||N>=Z)&&(N=0),I.getUpdatedOffsetForIndex({align:v,containerSize:m===Qe.VERTICAL?s:r,currentOffset:z.offset||0,targetIndex:N})}function ze(N){const v=ve();v<0||z.offset===v||N.target!==P||(l(19,z={offset:v,scrollChangeReason:gt.OBSERVED}),w("afterScroll",{offset:v,event:N}))}function ve(){return P[el[m]]}function U(){return o||typeof a=="number"&&a||50}function ee(N,v){if(B[N])return B[N];const{size:Z,offset:re}=I.getSizeAndPositionForIndex(N);let te;return m===Qe.VERTICAL?(te=`left:0;width:100%;height:${Z}px;`,v?te+=`position:sticky;flex-grow:0;z-index:1;top:0;margin-top:${re}px;margin-bottom:${-(re+Z)}px;`:te+=`position:absolute;top:${re}px;`):(te=`top:0;width:${Z}px;`,v?te+=`position:sticky;z-index:1;left:0;margin-left:${re}px;margin-right:${-(re+Z)}px;`:te+=`position:absolute;height:100%;left:${re}px;`),B[N]=te}function ne(N){lt[N?"unshift":"push"](()=>{P=N,l(1,P)})}return t.$$set=N=>{"height"in N&&l(5,s=N.height),"width"in N&&l(6,r=N.width),"itemCount"in N&&l(7,u=N.itemCount),"itemSize"in N&&l(8,a=N.itemSize),"estimatedItemSize"in N&&l(9,o=N.estimatedItemSize),"stickyIndices"in N&&l(10,h=N.stickyIndices),"getKey"in N&&l(0,g=N.getKey),"scrollDirection"in N&&l(11,m=N.scrollDirection),"scrollOffset"in N&&l(12,_=N.scrollOffset),"scrollToIndex"in N&&l(13,f=N.scrollToIndex),"scrollToAlignment"in N&&l(14,c=N.scrollToAlignment),"scrollToBehaviour"in N&&l(15,d=N.scrollToBehaviour),"overscanCount"in N&&l(16,p=N.overscanCount),"$$scope"in N&&l(20,n=N.$$scope)},t.$$.update=()=>{t.$$.dirty[0]&29568&&W(),t.$$.dirty[0]&524288&&he(),t.$$.dirty[0]&263264&&C&&Q(0)},[g,P,L,H,$,s,r,u,a,o,h,m,_,f,c,d,p,Q,C,z,n,i,ne]}class Jl extends xe{constructor(e){super(),$e(this,e,zs,Ms,Ze,{height:5,width:6,itemCount:7,itemSize:8,estimatedItemSize:9,stickyIndices:10,getKey:0,scrollDirection:11,scrollOffset:12,scrollToIndex:13,scrollToAlignment:14,scrollToBehaviour:15,overscanCount:16,recomputeSizes:17},null,[-1,-1])}get recomputeSizes(){return this.$$.ctx[17]}}function rl(t,e,l){const i=t.slice();return i[9]=e[l],i}function Ns(t){let e,l,i;return l=new Jl({props:{height:"auto",overscanCount:15,itemCount:t[0].raw.length,itemSize:t[0].raw.map(t[6]),$$slots:{item:[Ds,({style:n,index:s})=>({12:n,13:s}),({style:n,index:s})=>(n?4096:0)|(s?8192:0)]},$$scope:{ctx:t}}}),{c(){e=A("div"),qe(l.$$.fragment),this.h()},l(n){e=R(n,"DIV",{class:!0});var s=O(e);je(l.$$.fragment,s),s.forEach(k),this.h()},h(){y(e,"class","mt-4 flex flex-col overflow-auto")},m(n,s){V(n,e,s),Je(l,e,null),i=!0},p(n,s){const r={};s&1&&(r.itemCount=n[0].raw.length),s&1&&(r.itemSize=n[0].raw.map(n[6])),s&28699&&(r.$$scope={dirty:s,ctx:n}),l.$set(r)},i(n){i||(q(l.$$.fragment,n),i=!0)},o(n){F(l.$$.fragment,n),i=!1},d(n){n&&k(e),Ue(l)}}}function Os(t){let e,l,i=Le(Object.keys(t[0].grouped).map(t[7]).sort(ul).reverse()),n=[];for(let r=0;r<i.length;r+=1)n[r]=ol(rl(t,i,r));const s=r=>F(n[r],1,1,()=>{n[r]=null});return{c(){e=A("div");for(let r=0;r<n.length;r+=1)n[r].c();this.h()},l(r){e=R(r,"DIV",{class:!0});var u=O(e);for(let a=0;a<n.length;a+=1)n[a].l(u);u.forEach(k),this.h()},h(){y(e,"class","flex flex-col overflow-auto")},m(r,u){V(r,e,u);for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(e,null);l=!0},p(r,u){if(u&12411){i=Le(Object.keys(r[0].grouped).map(r[7]).sort(ul).reverse());let a;for(a=0;a<i.length;a+=1){const o=rl(r,i,a);n[a]?(n[a].p(o,u),q(n[a],1)):(n[a]=ol(o),n[a].c(),q(n[a],1),n[a].m(e,null))}for(Ne(),a=i.length;a<n.length;a+=1)s(a);Oe()}},i(r){if(!l){for(let u=0;u<i.length;u+=1)q(n[u]);l=!0}},o(r){n=n.filter(Boolean);for(let u=0;u<n.length;u+=1)F(n[u]);l=!1},d(r){r&&k(e),st(n,r)}}}function Ds(t){let e,l,i,n;return l=new jl({props:{set:t[0].raw[t[13]],highlight:t[1],jewel:t[3],conqueror:t[4]}}),{c(){e=A("div"),qe(l.$$.fragment),this.h()},l(s){e=R(s,"DIV",{slot:!0,style:!0});var r=O(e);je(l.$$.fragment,r),r.forEach(k),this.h()},h(){y(e,"slot","item"),y(e,"style",i=t[12])},m(s,r){V(s,e,r),Je(l,e,null),n=!0},p(s,r){const u={};r&8193&&(u.set=s[0].raw[s[13]]),r&2&&(u.highlight=s[1]),r&8&&(u.jewel=s[3]),r&16&&(u.conqueror=s[4]),l.$set(u),(!n||r&4096&&i!==(i=s[12]))&&y(e,"style",i)},i(s){n||(q(l.$$.fragment,s),n=!0)},o(s){F(l.$$.fragment,s),n=!1},d(s){s&&k(e),Ue(l)}}}function al(t){let e,l,i,n;return l=new Jl({props:{height:"auto",overscanCount:10,itemCount:t[0].grouped[t[9]].length,itemSize:t[0].grouped[t[9]].map(t[6]),$$slots:{item:[Vs,({style:s,index:r})=>({12:s,13:r}),({style:s,index:r})=>(s?4096:0)|(r?8192:0)]},$$scope:{ctx:t}}}),{c(){e=A("div"),qe(l.$$.fragment),i=j(),this.h()},l(s){e=R(s,"DIV",{class:!0});var r=O(e);je(l.$$.fragment,r),i=J(r),r.forEach(k),this.h()},h(){y(e,"class","flex flex-col overflow-auto min-h-[200px] mb-2")},m(s,r){V(s,e,r),Je(l,e,null),b(e,i),n=!0},p(s,r){const u={};r&1&&(u.itemCount=s[0].grouped[s[9]].length),r&1&&(u.itemSize=s[0].grouped[s[9]].map(s[6])),r&28699&&(u.$$scope={dirty:r,ctx:s}),l.$set(u)},i(s){n||(q(l.$$.fragment,s),n=!0)},o(s){F(l.$$.fragment,s),n=!1},d(s){s&&k(e),Ue(l)}}}function Vs(t){let e,l,i,n;return l=new jl({props:{set:t[0].grouped[t[9]][t[13]],highlight:t[1],jewel:t[3],conqueror:t[4]}}),{c(){e=A("div"),qe(l.$$.fragment),this.h()},l(s){e=R(s,"DIV",{slot:!0,style:!0});var r=O(e);je(l.$$.fragment,r),r.forEach(k),this.h()},h(){y(e,"slot","item"),y(e,"style",i=t[12])},m(s,r){V(s,e,r),Je(l,e,null),n=!0},p(s,r){const u={};r&8193&&(u.set=s[0].grouped[s[9]][s[13]]),r&2&&(u.highlight=s[1]),r&8&&(u.jewel=s[3]),r&16&&(u.conqueror=s[4]),l.$set(u),(!n||r&4096&&i!==(i=s[12]))&&y(e,"style",i)},i(s){n||(q(l.$$.fragment,s),n=!0)},o(s){F(l.$$.fragment,s),n=!1},d(s){s&&k(e),Ue(l)}}}function ol(t){let e,l,i=t[9]+"",n,s,r=t[9]>1?"es":"",u,a,o=t[0].grouped[t[9]].length+"",h,g,m,_,f=t[5]===t[9]?"^":"V",c,d,p,w,I,C;function P(){return t[8](t[9])}let L=t[5]===t[9]&&al(t);return{c(){e=A("button"),l=A("span"),n=X(i),s=X(" Match"),u=X(r),a=X(" ["),h=X(o),g=X("]"),m=j(),_=A("span"),c=X(f),d=j(),L&&L.c(),p=Se(),this.h()},l(z){e=R(z,"BUTTON",{class:!0});var M=O(e);l=R(M,"SPAN",{});var D=O(l);n=G(D,i),s=G(D," Match"),u=G(D,r),a=G(D," ["),h=G(D,o),g=G(D,"]"),D.forEach(k),m=J(M),_=R(M,"SPAN",{});var B=O(_);c=G(B,f),B.forEach(k),M.forEach(k),d=J(z),L&&L.l(z),p=Se(),this.h()},h(){y(e,"class","text-lg w-full p-2 px-4 bg-neutral-500/30 rounded flex flex-row justify-between mb-2")},m(z,M){V(z,e,M),b(e,l),b(l,n),b(l,s),b(l,u),b(l,a),b(l,h),b(l,g),b(e,m),b(e,_),b(_,c),V(z,d,M),L&&L.m(z,M),V(z,p,M),w=!0,I||(C=E(e,"click",P),I=!0)},p(z,M){t=z,(!w||M&1)&&i!==(i=t[9]+"")&&we(n,i),(!w||M&1)&&r!==(r=t[9]>1?"es":"")&&we(u,r),(!w||M&1)&&o!==(o=t[0].grouped[t[9]].length+"")&&we(h,o),(!w||M&33)&&f!==(f=t[5]===t[9]?"^":"V")&&we(c,f),t[5]===t[9]?L?(L.p(t,M),M&33&&q(L,1)):(L=al(t),L.c(),q(L,1),L.m(p.parentNode,p)):L&&(Ne(),F(L,1,1,()=>{L=null}),Oe())},i(z){w||(q(L),w=!0)},o(z){F(L),w=!1},d(z){z&&(k(e),k(d),k(p)),L&&L.d(z),I=!1,C()}}}function qs(t){let e,l,i,n;const s=[Os,Ns],r=[];function u(a,o){return a[2]?0:1}return e=u(t),l=r[e]=s[e](t),{c(){l.c(),i=Se()},l(a){l.l(a),i=Se()},m(a,o){r[e].m(a,o),V(a,i,o),n=!0},p(a,[o]){let h=e;e=u(a),e===h?r[e].p(a,o):(Ne(),F(r[h],1,1,()=>{r[h]=null}),Oe(),l=r[e],l?l.p(a,o):(l=r[e]=s[e](a),l.c()),q(l,1),l.m(i.parentNode,i))},i(a){n||(q(l),n=!0)},o(a){F(l),n=!1},d(a){a&&k(i),r[e].d(a)}}}const ul=(t,e)=>t-e;function js(t,e,l){let{searchResults:i}=e,{highlight:n}=e,{groupResults:s=!0}=e,{jewel:r}=e,{conqueror:u}=e;const a=m=>8+48+m.skills.reduce((_,f)=>_+32+Object.keys(f.stats).length*24,0);let o="";const h=m=>parseInt(m),g=m=>l(5,o=o===m?"":m);return t.$$set=m=>{"searchResults"in m&&l(0,i=m.searchResults),"highlight"in m&&l(1,n=m.highlight),"groupResults"in m&&l(2,s=m.groupResults),"jewel"in m&&l(3,r=m.jewel),"conqueror"in m&&l(4,u=m.conqueror)},[i,n,s,r,u,o,a,h,g]}class Js extends xe{constructor(e){super(),$e(this,e,js,qs,Ze,{searchResults:0,highlight:1,groupResults:2,jewel:3,conqueror:4})}}const it={25:1,26:1,42:1,49:1,56:1,63:1,70:2,95:4,117:1,124:4,134:1,150:2,216:1,434:1,482:1,483:1,484:1,488:1,554:1,556:1,593:3,594:3,595:3,619:1,943:1,944:1,945:1,946:1,2133:4,3108:3,3109:4,3110:4,3111:4,5815:4,8835:1,9091:1,9772:1,14775:2,209:1,447:1,573:2,1294:1,1361:1,2031:5,8177:2,448:2,486:1,579:2,1404:1,2030:5,9090:1,9711:2,9712:2,9713:2,9714:2,9716:1,9717:1,9718:1,9721:1,9722:1,9723:1,9724:1,186:2,490:1,1251:3,1654:1,3392:1,6042:1,6048:1,6049:1,6050:1,6136:1,7499:2};function Us(t){let e,l=t[2]?t[0]?"Hide Trade Links":"Show Trade Links":"Trade",i,n,s,r;return{c(){e=A("button"),i=X(l),this.h()},l(u){e=R(u,"BUTTON",{class:!0});var a=O(e);i=G(a,l),a.forEach(k),this.h()},h(){y(e,"class","p-1 px-3 bg-blue-500/40 rounded disabled:bg-blue-900/40 mr-2"),e.disabled=n=!t[1]},m(u,a){V(u,e,a),b(e,i),s||(r=E(e,"click",t[3]),s=!0)},p(u,[a]){a&5&&l!==(l=u[2]?u[0]?"Hide Trade Links":"Show Trade Links":"Trade")&&we(i,l),a&2&&n!==(n=!u[1])&&(e.disabled=n)},i:He,o:He,d(u){u&&k(e),s=!1,r()}}}function Bs(t,e,l){let i,{queries:n}=e,{showTradeLinks:s=!1}=e;const r=()=>{n.length===1?qt(n[0]):i&&l(0,s=!s)};return t.$$set=u=>{"queries"in u&&l(1,n=u.queries),"showTradeLinks"in u&&l(0,s=u.showTradeLinks)},t.$$.update=()=>{t.$$.dirty&1&&console.log(s),t.$$.dirty&2&&l(2,i=n.length>1)},[s,n,i,r]}class Fs extends xe{constructor(e){super(),$e(this,e,Bs,Us,Ze,{queries:1,showTradeLinks:0})}}function fl(t,e,l){const i=t.slice();return i[2]=e[l],i[4]=l,i}function cl(t){let e,l,i=t[4]+1+"",n,s,r,u;function a(){return t[1](t[2])}return{c(){e=A("button"),l=X("Trade Batch "),n=X(i),s=j(),this.h()},l(o){e=R(o,"BUTTON",{class:!0});var h=O(e);l=G(h,"Trade Batch "),n=G(h,i),s=J(h),h.forEach(k),this.h()},h(){y(e,"class","p-1 px-3 bg-blue-500/40 rounded")},m(o,h){V(o,e,h),b(e,l),b(e,n),b(e,s),r||(u=E(e,"click",a),r=!0)},p(o,h){t=o},d(o){o&&k(e),r=!1,u()}}}function Hs(t){let e,l=Le(t[0]),i=[];for(let n=0;n<l.length;n+=1)i[n]=cl(fl(t,l,n));return{c(){e=A("div");for(let n=0;n<i.length;n+=1)i[n].c();this.h()},l(n){e=R(n,"DIV",{class:!0});var s=O(e);for(let r=0;r<i.length;r+=1)i[r].l(s);s.forEach(k),this.h()},h(){y(e,"class","flex flex-wrap gap-2.5 my-2")},m(n,s){V(n,e,s);for(let r=0;r<i.length;r+=1)i[r]&&i[r].m(e,null)},p(n,[s]){if(s&1){l=Le(n[0]);let r;for(r=0;r<l.length;r+=1){const u=fl(n,l,r);i[r]?i[r].p(u,s):(i[r]=cl(u),i[r].c(),i[r].m(e,null))}for(;r<i.length;r+=1)i[r].d(1);i.length=l.length}},i:He,o:He,d(n){n&&k(e),st(i,n)}}}function Ks(t,e,l){let{queries:i}=e;const n=s=>qt(s);return t.$$set=s=>{"queries"in s&&l(0,i=s.queries)},[i,n]}class Ys extends xe{constructor(e){super(),$e(this,e,Ks,Hs,Ze,{queries:0})}}const{window:Xs}=Ol;function hl(t,e,l){const i=t.slice();return i[82]=e[l],i[83]=e,i[84]=l,i}function dl(t,e,l){const i=t.slice();return i[75]=e[l],i}function ml(t,e,l){const i=t.slice();return i[75]=e[l],i}function _l(t,e,l){const i=t.slice();return i[75]=e[l],i}function Gs(t){let e,l="<div></div> <div></div> <div></div>",i,n;return{c(){e=A("button"),e.innerHTML=l,this.h()},l(s){e=R(s,"BUTTON",{class:!0,"data-svelte-h":!0}),ke(e)!=="svelte-rq6e1l"&&(e.innerHTML=l),this.h()},h(){y(e,"class","burger-menu absolute top-0 left-0 bg-black/80 backdrop-blur-sm rounded-br-lg p-4 pt-5")},m(s,r){V(s,e,r),i||(n=E(e,"click",t[69]),i=!0)},p:He,i:He,o:He,d(s){s&&k(e),i=!1,n()}}}function Ws(t){let e,l,i,n,s,r="<div></div> <div></div> <div></div>",u,a,o=t[5]?"Results":"Timeless Jewel",h,g,m,_,f,c,d,p=t[6]&&gl(t),w=!t[5]&&vl(t),I=t[6]&&t[5]&&Rl(t);return{c(){e=A("div"),l=A("div"),i=A("div"),n=A("div"),s=A("button"),s.innerHTML=r,u=j(),a=A("h3"),h=X(o),g=j(),p&&p.c(),m=j(),w&&w.c(),_=j(),I&&I.c(),this.h()},l(C){e=R(C,"DIV",{class:!0});var P=O(e);l=R(P,"DIV",{class:!0});var L=O(l);i=R(L,"DIV",{class:!0});var z=O(i);n=R(z,"DIV",{class:!0});var M=O(n);s=R(M,"BUTTON",{class:!0,"data-svelte-h":!0}),ke(s)!=="svelte-mvbl10"&&(s.innerHTML=r),u=J(M),a=R(M,"H3",{class:!0});var D=O(a);h=G(D,o),D.forEach(k),M.forEach(k),g=J(z),p&&p.l(z),z.forEach(k),m=J(L),w&&w.l(L),_=J(L),I&&I.l(L),L.forEach(k),P.forEach(k),this.h()},h(){y(s,"class","burger-menu mr-3"),y(a,"class","flex-grow"),y(n,"class","flex flex-row items-center"),y(i,"class","flex flex-row justify-between mb-2"),y(l,"class","p-4 max-h-screen flex flex-col"),y(e,"class","w-screen md:w-10/12 lg:w-2/3 xl:w-1/2 2xl:w-5/12 3xl:w-1/3 4xl:w-1/4 absolute top-0 left-0 bg-black/80 backdrop-blur-sm themed rounded-br-lg max-h-screen")},m(C,P){V(C,e,P),b(e,l),b(l,i),b(i,n),b(n,s),b(n,u),b(n,a),b(a,h),b(i,g),p&&p.m(i,null),b(l,m),w&&w.m(l,null),b(l,_),I&&I.m(l,null),f=!0,c||(d=E(s,"click",t[48]),c=!0)},p(C,P){(!f||P[0]&32)&&o!==(o=C[5]?"Results":"Timeless Jewel")&&we(h,o),C[6]?p?(p.p(C,P),P[0]&64&&q(p,1)):(p=gl(C),p.c(),q(p,1),p.m(i,null)):p&&(Ne(),F(p,1,1,()=>{p=null}),Oe()),C[5]?w&&(Ne(),F(w,1,1,()=>{w=null}),Oe()):w?(w.p(C,P),P[0]&32&&q(w,1)):(w=vl(C),w.c(),q(w,1),w.m(l,_)),C[6]&&C[5]?I?(I.p(C,P),P[0]&96&&q(I,1)):(I=Rl(C),I.c(),q(I,1),I.m(l,null)):I&&(Ne(),F(I,1,1,()=>{I=null}),Oe())},i(C){f||(q(p),q(w),q(I),f=!0)},o(C){F(p),F(w),F(I),f=!1},d(C){C&&k(e),p&&p.d(),w&&w.d(),I&&I.d(),c=!1,d()}}}function gl(t){let e,l,i,n=t[5]?"Config":"Results",s,r,u,a,o=t[5]&&pl(t);return{c(){e=A("div"),o&&o.c(),l=j(),i=A("button"),s=X(n),this.h()},l(h){e=R(h,"DIV",{class:!0});var g=O(e);o&&o.l(g),l=J(g),i=R(g,"BUTTON",{class:!0});var m=O(i);s=G(m,n),m.forEach(k),g.forEach(k),this.h()},h(){y(i,"class","bg-neutral-100/20 px-4 p-1 rounded"),y(e,"class","flex flex-row")},m(h,g){V(h,e,g),o&&o.m(e,null),b(e,l),b(e,i),b(i,s),r=!0,u||(a=E(i,"click",t[51]),u=!0)},p(h,g){h[5]?o?(o.p(h,g),g[0]&32&&q(o,1)):(o=pl(h),o.c(),q(o,1),o.m(e,l)):o&&(Ne(),F(o,1,1,()=>{o=null}),Oe()),(!r||g[0]&32)&&n!==(n=h[5]?"Config":"Results")&&we(s,n)},i(h){r||(q(o),r=!0)},o(h){F(o),r=!1},d(h){h&&k(e),o&&o.d(),u=!1,a()}}}function pl(t){let e,l,i,n,s,r,u,a,o;function h(m){t[49](m)}let g={queries:t[13]};return t[24]!==void 0&&(g.showTradeLinks=t[24]),e=new Fs({props:g}),lt.push(()=>Et(e,"showTradeLinks",h)),{c(){qe(e.$$.fragment),i=j(),n=A("button"),s=X("Grouped"),this.h()},l(m){je(e.$$.fragment,m),i=J(m),n=R(m,"BUTTON",{class:!0});var _=O(n);s=G(_,"Grouped"),_.forEach(k),this.h()},h(){y(n,"class","p-1 px-3 bg-blue-500/40 rounded disabled:bg-blue-900/40 mr-2 svelte-1n2bhso"),n.disabled=r=!t[6],me(n,"grouped",t[9])},m(m,_){Je(e,m,_),V(m,i,_),V(m,n,_),b(n,s),u=!0,a||(o=E(n,"click",t[50]),a=!0)},p(m,_){const f={};_[0]&8192&&(f.queries=m[13]),!l&&_[0]&16777216&&(l=!0,f.showTradeLinks=m[24],Tt(()=>l=!1)),e.$set(f),(!u||_[0]&64&&r!==(r=!m[6]))&&(n.disabled=r),(!u||_[0]&512)&&me(n,"grouped",m[9])},i(m){u||(q(e.$$.fragment,m),u=!0)},o(m){F(e.$$.fragment,m),u=!1},d(m){m&&(k(i),k(n)),Ue(e,m),a=!1,o()}}}function vl(t){let e,l,i,n,s;function r(o){t[52](o)}let u={items:t[28]};t[0]!==void 0&&(u.value=t[0]),e=new Ct({props:u}),lt.push(()=>Et(e,"value",r)),e.$on("change",t[34]);let a=t[0]&&bl(t);return{c(){qe(e.$$.fragment),i=j(),a&&a.c(),n=Se()},l(o){je(e.$$.fragment,o),i=J(o),a&&a.l(o),n=Se()},m(o,h){Je(e,o,h),V(o,i,h),a&&a.m(o,h),V(o,n,h),s=!0},p(o,h){const g={};!l&&h[0]&1&&(l=!0,g.value=o[0],Tt(()=>l=!1)),e.$set(g),o[0]?a?(a.p(o,h),h[0]&1&&q(a,1)):(a=bl(o),a.c(),q(a,1),a.m(n.parentNode,n)):a&&(Ne(),F(a,1,1,()=>{a=null}),Oe())},i(o){s||(q(e.$$.fragment,o),q(a),s=!0)},o(o){F(e.$$.fragment,o),F(a),s=!1},d(o){o&&(k(i),k(n)),Ue(e,o),a&&a.d(o)}}}function bl(t){let e,l,i="Conqueror",n,s,r,u,a=t[14]&&Object.keys(se.TimelessJewelConquerors[t[0].value]).indexOf(t[14].value)>=0,o,h;function g(f){t[53](f)}let m={items:t[27]};t[1]!==void 0&&(m.value=t[1]),s=new Ct({props:m}),lt.push(()=>Et(s,"value",g)),s.$on("change",t[29]);let _=a&&wl(t);return{c(){e=A("div"),l=A("h3"),l.textContent=i,n=j(),qe(s.$$.fragment),u=j(),_&&_.c(),o=Se(),this.h()},l(f){e=R(f,"DIV",{class:!0});var c=O(e);l=R(c,"H3",{class:!0,"data-svelte-h":!0}),ke(l)!=="svelte-1jyt00f"&&(l.textContent=i),n=J(c),je(s.$$.fragment,c),c.forEach(k),u=J(f),_&&_.l(f),o=Se(),this.h()},h(){y(l,"class","mb-2"),y(e,"class","mt-4")},m(f,c){V(f,e,c),b(e,l),b(e,n),Je(s,e,null),V(f,u,c),_&&_.m(f,c),V(f,o,c),h=!0},p(f,c){const d={};c[0]&134217728&&(d.items=f[27]),!r&&c[0]&2&&(r=!0,d.value=f[1],Tt(()=>r=!1)),s.$set(d),c[0]&16385&&(a=f[14]&&Object.keys(se.TimelessJewelConquerors[f[0].value]).indexOf(f[14].value)>=0),a?_?(_.p(f,c),c[0]&16385&&q(_,1)):(_=wl(f),_.c(),q(_,1),_.m(o.parentNode,o)):_&&(Ne(),F(_,1,1,()=>{_=null}),Oe())},i(f){h||(q(s.$$.fragment,f),q(_),h=!0)},o(f){F(s.$$.fragment,f),F(_),h=!1},d(f){f&&(k(e),k(u),k(o)),Ue(s),_&&_.d(f)}}}function wl(t){let e,l,i="Enter Seed",n,s,r="Select Stats",u,a,o,h,g,m,_,f;const c=[Zs,Qs],d=[];function p(I,C){return I[16]==="seed"?0:I[16]==="stats"?1:-1}~(a=p(t))&&(o=d[a]=c[a](t));let w=!t[3]&&Al();return{c(){e=A("div"),l=A("button"),l.textContent=i,n=j(),s=A("button"),s.textContent=r,u=j(),o&&o.c(),h=j(),w&&w.c(),g=Se(),this.h()},l(I){e=R(I,"DIV",{class:!0});var C=O(e);l=R(C,"BUTTON",{class:!0,"data-svelte-h":!0}),ke(l)!=="svelte-l4qe05"&&(l.textContent=i),n=J(C),s=R(C,"BUTTON",{class:!0,"data-svelte-h":!0}),ke(s)!=="svelte-1d9agkx"&&(s.textContent=r),C.forEach(k),u=J(I),o&&o.l(I),h=J(I),w&&w.l(I),g=Se(),this.h()},h(){y(l,"class","selection-button svelte-1n2bhso"),me(l,"selected",t[16]==="seed"),y(s,"class","selection-button svelte-1n2bhso"),me(s,"selected",t[16]==="stats"),y(e,"class","mt-4 w-full flex flex-row")},m(I,C){V(I,e,C),b(e,l),b(e,n),b(e,s),V(I,u,C),~a&&d[a].m(I,C),V(I,h,C),w&&w.m(I,C),V(I,g,C),m=!0,_||(f=[E(l,"click",t[54]),E(s,"click",t[55])],_=!0)},p(I,C){(!m||C[0]&65536)&&me(l,"selected",I[16]==="seed"),(!m||C[0]&65536)&&me(s,"selected",I[16]==="stats");let P=a;a=p(I),a===P?~a&&d[a].p(I,C):(o&&(Ne(),F(d[P],1,1,()=>{d[P]=null}),Oe()),~a?(o=d[a],o?o.p(I,C):(o=d[a]=c[a](I),o.c()),q(o,1),o.m(h.parentNode,h)):o=null),I[3]?w&&(w.d(1),w=null):w||(w=Al(),w.c(),w.m(g.parentNode,g))},i(I){m||(q(o),m=!0)},o(I){F(o),m=!1},d(I){I&&(k(e),k(u),k(h),k(g)),~a&&d[a].d(I),w&&w.d(I),_=!1,nt(f)}}}function Qs(t){let e,l,i="Add Stat",n,s,r,u=Object.keys(t[4]).length>0,a,o,h={items:t[25]};s=new Ct({props:h}),t[63](s),s.$on("change",t[32]);let g=u&&kl(t);return{c(){e=A("div"),l=A("h3"),l.textContent=i,n=j(),qe(s.$$.fragment),r=j(),g&&g.c(),a=Se(),this.h()},l(m){e=R(m,"DIV",{class:!0});var _=O(e);l=R(_,"H3",{class:!0,"data-svelte-h":!0}),ke(l)!=="svelte-8jbl9c"&&(l.textContent=i),n=J(_),je(s.$$.fragment,_),_.forEach(k),r=J(m),g&&g.l(m),a=Se(),this.h()},h(){y(l,"class","mb-2"),y(e,"class","mt-4")},m(m,_){V(m,e,_),b(e,l),b(e,n),Je(s,e,null),V(m,r,_),g&&g.m(m,_),V(m,a,_),o=!0},p(m,_){const f={};_[0]&33554432&&(f.items=m[25]),s.$set(f),_[0]&16&&(u=Object.keys(m[4]).length>0),u?g?g.p(m,_):(g=kl(m),g.c(),g.m(a.parentNode,a)):g&&(g.d(1),g=null)},i(m){o||(q(s.$$.fragment,m),o=!0)},o(m){F(s.$$.fragment,m),o=!1},d(m){m&&(k(e),k(r),k(a)),t[63](null),Ue(s),g&&g.d(m)}}}function Zs(t){let e,l,i="Seed",n,s,r,u,a,o,h,g,m,_,f=(t[2]<se.TimelessJewelSeedRanges[t[0].value].Min||t[2]>se.TimelessJewelSeedRanges[t[0].value].Max)&&yl(t),c=t[2]>=se.TimelessJewelSeedRanges[t[0].value].Min&&t[2]<=se.TimelessJewelSeedRanges[t[0].value].Max&&Il(t);return{c(){e=A("div"),l=A("h3"),l.textContent=i,n=j(),s=A("input"),a=j(),f&&f.c(),o=j(),c&&c.c(),h=Se(),this.h()},l(d){e=R(d,"DIV",{class:!0});var p=O(e);l=R(p,"H3",{class:!0,"data-svelte-h":!0}),ke(l)!=="svelte-12wsj4m"&&(l.textContent=i),n=J(p),s=R(p,"INPUT",{type:!0,min:!0,max:!0}),a=J(p),f&&f.l(p),p.forEach(k),o=J(d),c&&c.l(d),h=Se(),this.h()},h(){y(l,"class","mb-2"),y(s,"type","number"),y(s,"min",r=se.TimelessJewelSeedRanges[t[0].value].Min),y(s,"max",u=se.TimelessJewelSeedRanges[t[0].value].Max),y(e,"class","mt-4")},m(d,p){V(d,e,p),b(e,l),b(e,n),b(e,s),tt(s,t[2]),b(e,a),f&&f.m(e,null),V(d,o,p),c&&c.m(d,p),V(d,h,p),g=!0,m||(_=[E(s,"input",t[56]),E(s,"blur",t[29])],m=!0)},p(d,p){(!g||p[0]&1&&r!==(r=se.TimelessJewelSeedRanges[d[0].value].Min))&&y(s,"min",r),(!g||p[0]&1&&u!==(u=se.TimelessJewelSeedRanges[d[0].value].Max))&&y(s,"max",u),p[0]&4&&et(s.value)!==d[2]&&tt(s,d[2]),d[2]<se.TimelessJewelSeedRanges[d[0].value].Min||d[2]>se.TimelessJewelSeedRanges[d[0].value].Max?f?f.p(d,p):(f=yl(d),f.c(),f.m(e,null)):f&&(f.d(1),f=null),d[2]>=se.TimelessJewelSeedRanges[d[0].value].Min&&d[2]<=se.TimelessJewelSeedRanges[d[0].value].Max?c?(c.p(d,p),p[0]&5&&q(c,1)):(c=Il(d),c.c(),q(c,1),c.m(h.parentNode,h)):c&&(Ne(),F(c,1,1,()=>{c=null}),Oe())},i(d){g||(q(c),g=!0)},o(d){F(c),g=!1},d(d){d&&(k(e),k(o),k(h)),f&&f.d(),c&&c.d(d),m=!1,nt(_)}}}function kl(t){let e,l,i,n,s,r="Min Total Weight:",u,a,o,h,g,m,_,f,c,d,p,w,I,C,P,L,z,M,D,B,H,$,W,he,Ae,ce=Le(Object.keys(t[4])),Q=[];for(let U=0;U<ce.length;U+=1)Q[U]=Sl(hl(t,ce,U));function pe(U,ee){return U[20]?$s:xs}let ze=pe(t),ve=ze(t);return{c(){e=A("div");for(let U=0;U<Q.length;U+=1)Q[U].c();l=j(),i=A("div"),n=A("div"),s=A("div"),s.textContent=r,u=j(),a=A("input"),o=j(),h=A("div"),g=A("div"),m=A("button"),_=X("Select All"),c=j(),d=A("button"),p=X("Notables"),I=j(),C=A("button"),P=X("Passives"),z=j(),M=A("button"),D=X("Deselect"),H=j(),$=A("div"),W=A("button"),ve.c(),this.h()},l(U){e=R(U,"DIV",{class:!0});var ee=O(e);for(let Me=0;Me<Q.length;Me+=1)Q[Me].l(ee);ee.forEach(k),l=J(U),i=R(U,"DIV",{class:!0});var ne=O(i);n=R(ne,"DIV",{class:!0});var N=O(n);s=R(N,"DIV",{class:!0,"data-svelte-h":!0}),ke(s)!=="svelte-ydmsqj"&&(s.textContent=r),u=J(N),a=R(N,"INPUT",{type:!0,min:!0}),N.forEach(k),ne.forEach(k),o=J(U),h=R(U,"DIV",{class:!0});var v=O(h);g=R(v,"DIV",{class:!0});var Z=O(g);m=R(Z,"BUTTON",{class:!0});var re=O(m);_=G(re,"Select All"),re.forEach(k),c=J(Z),d=R(Z,"BUTTON",{class:!0});var te=O(d);p=G(te,"Notables"),te.forEach(k),I=J(Z),C=R(Z,"BUTTON",{class:!0});var de=O(C);P=G(de,"Passives"),de.forEach(k),z=J(Z),M=R(Z,"BUTTON",{class:!0});var ie=O(M);D=G(ie,"Deselect"),ie.forEach(k),Z.forEach(k),H=J(v),$=R(v,"DIV",{class:!0});var ye=O($);W=R(ye,"BUTTON",{class:!0});var _e=O(W);ve.l(_e),_e.forEach(k),ye.forEach(k),v.forEach(k),this.h()},h(){y(e,"class","mt-4 flex flex-col overflow-auto min-h-[100px]"),y(s,"class","mr-2 min-w-fit"),y(a,"type","number"),y(a,"min","0"),y(n,"class","flex flex-row items-center"),y(i,"class","flex flex-col mt-2"),y(m,"class","p-2 px-2 bg-yellow-500/40 rounded disabled:bg-yellow-900/40 mr-2"),m.disabled=f=t[20]||t[17].size==0,y(d,"class","p-2 px-2 bg-yellow-500/40 rounded disabled:bg-yellow-900/40 mr-2"),d.disabled=w=t[20]||t[17].size==0,y(C,"class","p-2 px-2 bg-yellow-500/40 rounded disabled:bg-yellow-900/40 mr-2"),C.disabled=L=t[20]||t[17].size==0,y(M,"class","p-2 px-2 bg-yellow-500/40 rounded disabled:bg-yellow-900/40 flex-grow"),M.disabled=B=t[20]||t[17].size>=t[15].length,y(g,"class","flex flex-row"),y(W,"class","p-2 px-3 bg-green-500/40 rounded disabled:bg-green-900/40 flex-grow"),W.disabled=t[20],y($,"class","flex flex-row mt-2"),y(h,"class","flex flex-col mt-4")},m(U,ee){V(U,e,ee);for(let ne=0;ne<Q.length;ne+=1)Q[ne]&&Q[ne].m(e,null);V(U,l,ee),V(U,i,ee),b(i,n),b(n,s),b(n,u),b(n,a),tt(a,t[19]),V(U,o,ee),V(U,h,ee),b(h,g),b(g,m),b(m,_),b(g,c),b(g,d),b(d,p),b(g,I),b(g,C),b(C,P),b(g,z),b(g,M),b(M,D),b(h,H),b(h,$),b($,W),ve.m(W,null),he||(Ae=[E(a,"input",t[67]),E(m,"click",t[37]),E(d,"click",t[38]),E(C,"click",t[39]),E(M,"click",t[40]),E(W,"click",t[68])],he=!0)},p(U,ee){if(ee[0]&16|ee[1]&4){ce=Le(Object.keys(U[4]));let ne;for(ne=0;ne<ce.length;ne+=1){const N=hl(U,ce,ne);Q[ne]?Q[ne].p(N,ee):(Q[ne]=Sl(N),Q[ne].c(),Q[ne].m(e,null))}for(;ne<Q.length;ne+=1)Q[ne].d(1);Q.length=ce.length}ee[0]&524288&&et(a.value)!==U[19]&&tt(a,U[19]),ee[0]&1179648&&f!==(f=U[20]||U[17].size==0)&&(m.disabled=f),ee[0]&1179648&&w!==(w=U[20]||U[17].size==0)&&(d.disabled=w),ee[0]&1179648&&L!==(L=U[20]||U[17].size==0)&&(C.disabled=L),ee[0]&1212416&&B!==(B=U[20]||U[17].size>=U[15].length)&&(M.disabled=B),ze===(ze=pe(U))&&ve?ve.p(U,ee):(ve.d(1),ve=ze(U),ve&&(ve.c(),ve.m(W,null))),ee[0]&1048576&&(W.disabled=U[20])},d(U){U&&(k(e),k(l),k(i),k(o),k(h)),st(Q,U),ve.d(),he=!1,nt(Ae)}}}function Sl(t){let e,l,i,n="-",s,r,u=ft(t[4][t[82]].id)+"",a,o,h,g,m,_="Min:",f,c,d,p,w,I="Weight:",C,P,L,z,M;function D(){return t[64](t[82])}function B(){t[65].call(c,t[82])}function H(){t[66].call(P,t[82])}return{c(){e=A("div"),l=A("div"),i=A("button"),i.textContent=n,s=j(),r=A("span"),a=X(u),o=j(),h=A("div"),g=A("div"),m=A("div"),m.textContent=_,f=j(),c=A("input"),d=j(),p=A("div"),w=A("div"),w.textContent=I,C=j(),P=A("input"),L=j(),this.h()},l($){e=R($,"DIV",{class:!0});var W=O(e);l=R(W,"DIV",{});var he=O(l);i=R(he,"BUTTON",{class:!0,"data-svelte-h":!0}),ke(i)!=="svelte-bzfob2"&&(i.textContent=n),s=J(he),r=R(he,"SPAN",{});var Ae=O(r);a=G(Ae,u),Ae.forEach(k),he.forEach(k),o=J(W),h=R(W,"DIV",{class:!0});var ce=O(h);g=R(ce,"DIV",{class:!0});var Q=O(g);m=R(Q,"DIV",{class:!0,"data-svelte-h":!0}),ke(m)!=="svelte-1m3cjix"&&(m.textContent=_),f=J(Q),c=R(Q,"INPUT",{type:!0,min:!0}),Q.forEach(k),d=J(ce),p=R(ce,"DIV",{class:!0});var pe=O(p);w=R(pe,"DIV",{class:!0,"data-svelte-h":!0}),ke(w)!=="svelte-nrzr8j"&&(w.textContent=I),C=J(pe),P=R(pe,"INPUT",{type:!0,min:!0}),pe.forEach(k),ce.forEach(k),L=J(W),W.forEach(k),this.h()},h(){y(i,"class","p-2 px-4 bg-red-500/40 rounded mr-2"),y(m,"class","mr-2"),y(c,"type","number"),y(c,"min","0"),y(g,"class","mr-4 flex flex-row items-center"),y(w,"class","mr-2"),y(P,"type","number"),y(P,"min","0"),y(p,"class","flex flex-row items-center"),y(h,"class","mt-2 flex flex-row"),y(e,"class","mb-4 flex flex-row items-start flex-col border-neutral-100/40 border-b pb-4")},m($,W){V($,e,W),b(e,l),b(l,i),b(l,s),b(l,r),b(r,a),b(e,o),b(e,h),b(h,g),b(g,m),b(g,f),b(g,c),tt(c,t[4][t[82]].min),b(h,d),b(h,p),b(p,w),b(p,C),b(p,P),tt(P,t[4][t[82]].weight),b(e,L),z||(M=[E(i,"click",D),E(c,"input",B),E(P,"input",H)],z=!0)},p($,W){t=$,W[0]&16&&u!==(u=ft(t[4][t[82]].id)+"")&&we(a,u),W[0]&16&&et(c.value)!==t[4][t[82]].min&&tt(c,t[4][t[82]].min),W[0]&16&&et(P.value)!==t[4][t[82]].weight&&tt(P,t[4][t[82]].weight)},d($){$&&k(e),z=!1,nt(M)}}}function xs(t){let e;return{c(){e=X("Search")},l(l){e=G(l,"Search")},m(l,i){V(l,e,i)},p:He,d(l){l&&k(e)}}}function $s(t){let e,l,i=se.TimelessJewelSeedRanges[t[0].value].Max+"",n;return{c(){e=X(t[21]),l=X(" / "),n=X(i)},l(s){e=G(s,t[21]),l=G(s," / "),n=G(s,i)},m(s,r){V(s,e,r),V(s,l,r),V(s,n,r)},p(s,r){r[0]&2097152&&we(e,s[21]),r[0]&1&&i!==(i=se.TimelessJewelSeedRanges[s[0].value].Max+"")&&we(n,i)},d(s){s&&(k(e),k(l),k(n))}}}function yl(t){let e,l,i=se.TimelessJewelSeedRanges[t[0].value].Min+"",n,s,r=se.TimelessJewelSeedRanges[t[0].value].Max+"",u;return{c(){e=A("div"),l=X("Seed must be between "),n=X(i),s=X(`
                      and `),u=X(r),this.h()},l(a){e=R(a,"DIV",{class:!0});var o=O(e);l=G(o,"Seed must be between "),n=G(o,i),s=G(o,`
                      and `),u=G(o,r),o.forEach(k),this.h()},h(){y(e,"class","mt-2")},m(a,o){V(a,e,o),b(e,l),b(e,n),b(e,s),b(e,u)},p(a,o){o[0]&1&&i!==(i=se.TimelessJewelSeedRanges[a[0].value].Min+"")&&we(n,i),o[0]&1&&r!==(r=se.TimelessJewelSeedRanges[a[0].value].Max+"")&&we(u,r)},d(a){a&&k(e)}}}function Il(t){let e,l,i,n="Sort Order",s,r,u,a,o,h,g="Colors",m,_,f,c="Split",d,p,w,I,C;function P(B){t[57](B)}let L={items:t[43]};t[10]!==void 0&&(L.value=t[10]),r=new Ct({props:L}),lt.push(()=>Et(r,"value",P));function z(B,H){return B[12]?ei:ti}let M=z(t),D=M(t);return{c(){e=A("div"),l=A("div"),i=A("h3"),i.textContent=n,s=j(),qe(r.$$.fragment),a=j(),o=A("div"),h=A("button"),h.textContent=g,m=j(),_=A("div"),f=A("button"),f.textContent=c,d=j(),D.c(),p=Se(),this.h()},l(B){e=R(B,"DIV",{class:!0});var H=O(e);l=R(H,"DIV",{class:!0});var $=O(l);i=R($,"H3",{class:!0,"data-svelte-h":!0}),ke(i)!=="svelte-6mxxgp"&&(i.textContent=n),s=J($),je(r.$$.fragment,$),$.forEach(k),a=J(H),o=R(H,"DIV",{class:!0});var W=O(o);h=R(W,"BUTTON",{class:!0,"data-svelte-h":!0}),ke(h)!=="svelte-79cf57"&&(h.textContent=g),W.forEach(k),m=J(H),_=R(H,"DIV",{class:!0});var he=O(_);f=R(he,"BUTTON",{class:!0,"data-svelte-h":!0}),ke(f)!=="svelte-1jp80zt"&&(f.textContent=c),he.forEach(k),H.forEach(k),d=J(B),D.l(B),p=Se(),this.h()},h(){y(i,"class","mb-2"),y(l,"class","flex-grow"),y(h,"class","bg-neutral-500/20 p-2 px-4 rounded svelte-1n2bhso"),me(h,"selected",t[11]),y(o,"class","ml-2"),y(f,"class","bg-neutral-500/20 p-2 px-4 rounded svelte-1n2bhso"),me(f,"selected",t[12]),y(_,"class","ml-2"),y(e,"class","flex flex-row mt-4 items-end")},m(B,H){V(B,e,H),b(e,l),b(l,i),b(l,s),Je(r,l,null),b(e,a),b(e,o),b(o,h),b(e,m),b(e,_),b(_,f),V(B,d,H),D.m(B,H),V(B,p,H),w=!0,I||(C=[E(h,"click",t[58]),E(f,"click",t[59])],I=!0)},p(B,H){const $={};!u&&H[0]&1024&&(u=!0,$.value=B[10],Tt(()=>u=!1)),r.$set($),(!w||H[0]&2048)&&me(h,"selected",B[11]),(!w||H[0]&4096)&&me(f,"selected",B[12]),M===(M=z(B))&&D?D.p(B,H):(D.d(1),D=M(B),D&&(D.c(),D.m(p.parentNode,p)))},i(B){w||(q(r.$$.fragment,B),w=!0)},o(B){F(r.$$.fragment,B),w=!1},d(B){B&&(k(e),k(d),k(p)),Ue(r),D.d(B),I=!1,nt(C)}}}function ei(t){let e,l,i="Notables",n,s,r,u,a="Smalls",o,h,g=Le(t[42](t[41](t[26],t[11],"notables"),t[10].value)),m=[];for(let c=0;c<g.length;c+=1)m[c]=Tl(ml(t,g,c));let _=Le(t[42](t[41](t[26],t[11],"passives"),t[10].value)),f=[];for(let c=0;c<_.length;c+=1)f[c]=El(dl(t,_,c));return{c(){e=A("div"),l=A("h3"),l.textContent=i,n=j(),s=A("ul");for(let c=0;c<m.length;c+=1)m[c].c();r=j(),u=A("h3"),u.textContent=a,o=j(),h=A("ul");for(let c=0;c<f.length;c+=1)f[c].c();this.h()},l(c){e=R(c,"DIV",{class:!0});var d=O(e);l=R(d,"H3",{"data-svelte-h":!0}),ke(l)!=="svelte-uhg2bi"&&(l.textContent=i),n=J(d),s=R(d,"UL",{class:!0});var p=O(s);for(let I=0;I<m.length;I+=1)m[I].l(p);p.forEach(k),r=J(d),u=R(d,"H3",{class:!0,"data-svelte-h":!0}),ke(u)!=="svelte-mdvksr"&&(u.textContent=a),o=J(d),h=R(d,"UL",{class:!0});var w=O(h);for(let I=0;I<f.length;I+=1)f[I].l(w);w.forEach(k),d.forEach(k),this.h()},h(){y(s,"class","mt-1 svelte-1n2bhso"),me(s,"rainbow",t[11]),y(u,"class","mt-2"),y(h,"class","mt-1 svelte-1n2bhso"),me(h,"rainbow",t[11]),y(e,"class","overflow-auto mt-4")},m(c,d){V(c,e,d),b(e,l),b(e,n),b(e,s);for(let p=0;p<m.length;p+=1)m[p]&&m[p].m(s,null);b(e,r),b(e,u),b(e,o),b(e,h);for(let p=0;p<f.length;p+=1)f[p]&&f[p].m(h,null)},p(c,d){if(d[0]&67111940|d[1]&3104){g=Le(c[42](c[41](c[26],c[11],"notables"),c[10].value));let p;for(p=0;p<g.length;p+=1){const w=ml(c,g,p);m[p]?m[p].p(w,d):(m[p]=Tl(w),m[p].c(),m[p].m(s,null))}for(;p<m.length;p+=1)m[p].d(1);m.length=g.length}if(d[0]&2048&&me(s,"rainbow",c[11]),d[0]&67111940|d[1]&3104){_=Le(c[42](c[41](c[26],c[11],"passives"),c[10].value));let p;for(p=0;p<_.length;p+=1){const w=dl(c,_,p);f[p]?f[p].p(w,d):(f[p]=El(w),f[p].c(),f[p].m(h,null))}for(;p<f.length;p+=1)f[p].d(1);f.length=_.length}d[0]&2048&&me(h,"rainbow",c[11])},d(c){c&&k(e),st(m,c),st(f,c)}}}function ti(t){let e,l=Le(t[42](t[41](t[26],t[11],"all"),t[10].value)),i=[];for(let n=0;n<l.length;n+=1)i[n]=Cl(_l(t,l,n));return{c(){e=A("ul");for(let n=0;n<i.length;n+=1)i[n].c();this.h()},l(n){e=R(n,"UL",{class:!0});var s=O(e);for(let r=0;r<i.length;r+=1)i[r].l(s);s.forEach(k),this.h()},h(){y(e,"class","mt-4 overflow-auto svelte-1n2bhso"),me(e,"rainbow",t[11])},m(n,s){V(n,e,s);for(let r=0;r<i.length;r+=1)i[r]&&i[r].m(e,null)},p(n,s){if(s[0]&67111940|s[1]&3104){l=Le(n[42](n[41](n[26],n[11],"all"),n[10].value));let r;for(r=0;r<l.length;r+=1){const u=_l(n,l,r);i[r]?i[r].p(u,s):(i[r]=Cl(u),i[r].c(),i[r].m(e,null))}for(;r<i.length;r+=1)i[r].d(1);i.length=l.length}s[0]&2048&&me(e,"rainbow",n[11])},d(n){n&&k(e),st(i,n)}}}function Tl(t){let e,l,i,n=t[75].passives.length+"",s,r,u,a,o,h=t[75].stat+"",g,m,_;function f(){return t[61](t[75])}return{c(){e=A("li"),l=A("span"),i=X("("),s=X(n),r=X(")"),u=j(),a=A("span"),o=new Dt(!1),g=j(),this.h()},l(c){e=R(c,"LI",{class:!0});var d=O(e);l=R(d,"SPAN",{class:!0});var p=O(l);i=G(p,"("),s=G(p,n),r=G(p,")"),p.forEach(k),u=J(d),a=R(d,"SPAN",{class:!0});var w=O(a);o=Vt(w,!1),w.forEach(k),g=J(d),d.forEach(k),this.h()},h(){y(l,"class","font-bold"),me(l,"text-white",(it[t[75].id]||0)<3),o.a=null,y(a,"class","text-white"),y(e,"class","cursor-pointer")},m(c,d){V(c,e,d),b(e,l),b(l,i),b(l,s),b(l,r),b(e,u),b(e,a),o.m(h,a),b(e,g),m||(_=E(e,"click",f),m=!0)},p(c,d){t=c,d[0]&67111936&&n!==(n=t[75].passives.length+"")&&we(s,n),d[0]&67111936|d[1]&3072&&me(l,"text-white",(it[t[75].id]||0)<3),d[0]&67111936&&h!==(h=t[75].stat+"")&&o.p(h)},d(c){c&&k(e),m=!1,_()}}}function El(t){let e,l,i,n=t[75].passives.length+"",s,r,u,a,o,h=t[75].stat+"",g,m,_;function f(){return t[62](t[75])}return{c(){e=A("li"),l=A("span"),i=X("("),s=X(n),r=X(")"),u=j(),a=A("span"),o=new Dt(!1),g=j(),this.h()},l(c){e=R(c,"LI",{class:!0});var d=O(e);l=R(d,"SPAN",{class:!0});var p=O(l);i=G(p,"("),s=G(p,n),r=G(p,")"),p.forEach(k),u=J(d),a=R(d,"SPAN",{class:!0});var w=O(a);o=Vt(w,!1),w.forEach(k),g=J(d),d.forEach(k),this.h()},h(){y(l,"class","font-bold"),me(l,"text-white",(it[t[75].id]||0)<3),o.a=null,y(a,"class","text-white"),y(e,"class","cursor-pointer")},m(c,d){V(c,e,d),b(e,l),b(l,i),b(l,s),b(l,r),b(e,u),b(e,a),o.m(h,a),b(e,g),m||(_=E(e,"click",f),m=!0)},p(c,d){t=c,d[0]&67111936&&n!==(n=t[75].passives.length+"")&&we(s,n),d[0]&67111936|d[1]&3072&&me(l,"text-white",(it[t[75].id]||0)<3),d[0]&67111936&&h!==(h=t[75].stat+"")&&o.p(h)},d(c){c&&k(e),m=!1,_()}}}function Cl(t){let e,l,i,n=t[75].passives.length+"",s,r,u,a,o,h=t[75].stat+"",g,m,_;function f(){return t[60](t[75])}return{c(){e=A("li"),l=A("span"),i=X("("),s=X(n),r=X(")"),u=j(),a=A("span"),o=new Dt(!1),g=j(),this.h()},l(c){e=R(c,"LI",{class:!0});var d=O(e);l=R(d,"SPAN",{class:!0});var p=O(l);i=G(p,"("),s=G(p,n),r=G(p,")"),p.forEach(k),u=J(d),a=R(d,"SPAN",{class:!0});var w=O(a);o=Vt(w,!1),w.forEach(k),g=J(d),d.forEach(k),this.h()},h(){y(l,"class","font-bold"),me(l,"text-white",(it[t[75].id]||0)<3),o.a=null,y(a,"class","text-white"),y(e,"class","cursor-pointer")},m(c,d){V(c,e,d),b(e,l),b(l,i),b(l,s),b(l,r),b(e,u),b(e,a),o.m(h,a),b(e,g),m||(_=E(e,"click",f),m=!0)},p(c,d){t=c,d[0]&67111936&&n!==(n=t[75].passives.length+"")&&we(s,n),d[0]&67111936|d[1]&3072&&me(l,"text-white",(it[t[75].id]||0)<3),d[0]&67111936&&h!==(h=t[75].stat+"")&&o.p(h)},d(c){c&&k(e),m=!1,_()}}}function Al(t){let e,l="Click on a jewel socket";return{c(){e=A("h2"),e.textContent=l,this.h()},l(i){e=R(i,"H2",{class:!0,"data-svelte-h":!0}),ke(e)!=="svelte-4ztcob"&&(e.textContent=l),this.h()},h(){y(e,"class","mt-4")},m(i,n){V(i,e,n)},d(i){i&&k(e)}}}function Rl(t){let e,l,i,n=t[24]&&Ll(t);return l=new Js({props:{searchResults:t[6],groupResults:t[9],highlight:t[36],jewel:t[7],conqueror:t[8]}}),{c(){n&&n.c(),e=j(),qe(l.$$.fragment)},l(s){n&&n.l(s),e=J(s),je(l.$$.fragment,s)},m(s,r){n&&n.m(s,r),V(s,e,r),Je(l,s,r),i=!0},p(s,r){s[24]?n?(n.p(s,r),r[0]&16777216&&q(n,1)):(n=Ll(s),n.c(),q(n,1),n.m(e.parentNode,e)):n&&(Ne(),F(n,1,1,()=>{n=null}),Oe());const u={};r[0]&64&&(u.searchResults=s[6]),r[0]&512&&(u.groupResults=s[9]),r[0]&128&&(u.jewel=s[7]),r[0]&256&&(u.conqueror=s[8]),l.$set(u)},i(s){i||(q(n),q(l.$$.fragment,s),i=!0)},o(s){F(n),F(l.$$.fragment,s),i=!1},d(s){s&&k(e),n&&n.d(s),Ue(l,s)}}}function Ll(t){let e,l;return e=new Ys({props:{queries:t[13]}}),{c(){qe(e.$$.fragment)},l(i){je(e.$$.fragment,i)},m(i,n){Je(e,i,n),l=!0},p(i,n){const s={};n[0]&8192&&(s.queries=i[13]),e.$set(s)},i(i){l||(q(e.$$.fragment,i),l=!0)},o(i){F(e.$$.fragment,i),l=!1},d(i){Ue(e,i)}}}function li(t){let e,l,i,n,s='<a href="https://github.com/Vilsol/timeless-jewels" target="_blank" rel="noopener">Source (Github)</a>',r;const u=[Ws,Gs],a=[];function o(h,g){return h[23]?1:0}return e=o(t),l=a[e]=u[e](t),{c(){l.c(),i=j(),n=A("div"),n.innerHTML=s,this.h()},l(h){l.l(h),i=J(h),n=R(h,"DIV",{class:!0,"data-svelte-h":!0}),ke(n)!=="svelte-1xcazan"&&(n.innerHTML=s),this.h()},h(){y(n,"class","text-orange-500 absolute bottom-0 right-0 m-2")},m(h,g){a[e].m(h,g),V(h,i,g),V(h,n,g),r=!0},p(h,g){let m=e;e=o(h),e===m?a[e].p(h,g):(Ne(),F(a[m],1,1,()=>{a[m]=null}),Oe(),l=a[e],l?l.p(h,g):(l=a[e]=u[e](h),l.c()),q(l,1),l.m(i.parentNode,i))},i(h){r||(q(l),r=!0)},o(h){F(l),r=!1},d(h){h&&(k(i),k(n)),a[e].d(h)}}}function si(t){var s,r;let e,l,i,n;return e=new ys({props:{clickNode:t[31],circledNode:t[3],selectedJewel:(s=t[0])==null?void 0:s.value,selectedConqueror:(r=t[14])==null?void 0:r.value,highlighted:t[22],seed:t[2],highlightJewels:!t[3],disabled:[...t[17]],$$slots:{default:[li]},$$scope:{ctx:t}}}),{c(){qe(e.$$.fragment)},l(u){je(e.$$.fragment,u)},m(u,a){Je(e,u,a),l=!0,i||(n=E(Xs,"paste",t[44]),i=!0)},p(u,a){var h,g;const o={};a[0]&8&&(o.circledNode=u[3]),a[0]&1&&(o.selectedJewel=(h=u[0])==null?void 0:h.value),a[0]&16384&&(o.selectedConqueror=(g=u[14])==null?void 0:g.value),a[0]&4194304&&(o.highlighted=u[22]),a[0]&4&&(o.seed=u[2]),a[0]&8&&(o.highlightJewels=!u[3]),a[0]&131072&&(o.disabled=[...u[17]]),a[0]&264241151|a[2]&8388608&&(o.$$scope={dirty:a,ctx:u}),e.$set(o)},i(u){l||(q(e.$$.fragment,u),l=!0)},o(u){F(e.$$.fragment,u),l=!1},d(u){Ue(e,u),i=!1,n()}}}function ii(t,e,l){let i,n,s,r,u,a,o,h,g;zl(t,ss,T=>l(71,g=T));const m=g.url.searchParams,_=Object.keys(se.TimelessJewels).map(T=>({value:parseInt(T),label:se.TimelessJewels[T]}));let f=m.has("jewel")?_.find(T=>T.value==m.get("jewel")):void 0,c=m.has("conqueror")?{value:m.get("conqueror"),label:m.get("conqueror")}:void 0,d=m.has("seed")?parseInt(m.get("seed")):0,p=m.has("location")?parseInt(m.get("location")):void 0,w={};m.has("stat")&&m.getAll("stat").forEach(T=>{const le=parseInt(T);l(4,w[le]={weight:1,min:0,id:le},w)});let I=m.has("mode")?m.get("mode"):"";const C=()=>{const T=new URL(window.location.origin+window.location.pathname);f&&T.searchParams.append("jewel",f.value.toString()),c&&T.searchParams.append("conqueror",c.value),d&&T.searchParams.append("seed",d.toString()),p&&T.searchParams.append("location",p.toString()),I&&T.searchParams.append("mode",I),Object.keys(w).forEach(le=>{T.searchParams.append("stat",le.toString())}),Xl(T.toString())},P=T=>{l(16,I=T),C()};let L=new Set;const z=T=>{T.isJewelSocket?(l(3,p=T.skill),C()):T.isMastery||(L.has(T.skill)?L.delete(T.skill):L.add(T.skill),l(17,L))},M=JSON.parse(se.PossibleStats);let D;const B=T=>{l(4,w[T.detail.value]={weight:1,min:0,id:T.detail.value},w),l(4,w),D.handleClear(),C()},H=T=>{delete w[T],l(4,w),C()},$=()=>{l(4,w={}),C()};let W=!1,he=0,Ae=!1,ce=0,Q,pe=1,ze=null;const ve=()=>{if(!p)return;l(7,pe=f.value),l(8,ze=s?null:r.value),l(20,Ae=!0),l(6,Q=void 0);const T={jewel:f.value,conqueror:r.value,nodes:u.filter(le=>!L.has(le.skill)).map(le=>se.TreeToPassive[le.skill]).filter(le=>!!le).map(le=>le.Index),stats:Object.keys(w).map(le=>w[le]),minTotalWeight:he};es.search(T,ts(le=>l(21,ce=le))).then(le=>{l(6,Q=le),l(20,Ae=!1),l(5,W=!0)})};let U=[];const ee=(T,le)=>{l(2,d=T),l(22,U=le),C()},ne=()=>{L.clear(),l(17,L)},N=()=>{u.forEach(T=>{T.isNotable&&L.delete(T.skill)}),l(17,L)},v=()=>{u.forEach(T=>{T.isNotable||L.delete(T.skill)}),l(17,L)},Z=()=>{u.filter(T=>!T.isJewelSocket&&!T.isMastery).forEach(T=>L.add(T.skill)),l(17,L)};let re=localStorage.getItem("groupResults")===null?!0:localStorage.getItem("groupResults")==="true";const te={physical:"#c79d93",cast:"#b3f8fe",fire:"#ff9a77",cold:"#93d8ff",lightning:"#f8cb76",attack:"#da814d",life:"#c96e6e",chaos:"#d8a7d3",unique:"#af6025",critical:"#b2a7d6"},de=T=>(Object.keys(te).forEach(le=>{const be=te[le];T=T.replace(new RegExp(`(${le}(?:$|\\s))|((?:^|\\s)${le})`,"gi"),`<span style='color: ${be}; font-weight: bold'>$1$2</span>`)}),T),ie=(T,le,be)=>{const Te={};return T.forEach(ge=>{Xe.nodes[ge.node].isKeystone||be!=="all"&&(be==="notables"&&!Xe.nodes[ge.node].isNotable||be==="passives"&&Xe.nodes[ge.node].isNotable)||(ge.result.AlternatePassiveSkill&&ge.result.AlternatePassiveSkill.StatsKeys&&ge.result.AlternatePassiveSkill.StatsKeys.forEach(Re=>{Te[Re]=[...Te[Re]||[],ge.node]}),ge.result.AlternatePassiveAdditionInformations&&ge.result.AlternatePassiveAdditionInformations.forEach(Re=>{Re.AlternatePassiveAddition.StatsKeys&&Re.AlternatePassiveAddition.StatsKeys.forEach(We=>{Te[We]=[...Te[We]||[],ge.node]})}))}),Object.keys(Te).map(ge=>{const Re=ft(parseInt(ge));return{stat:le?de(Re):Re,rawStat:Re,id:ge,passives:Te[ge]}})},ye=(T,le)=>{switch(le){case"alphabet":return T.sort((be,Te)=>be.rawStat.replace(/[#+%]/gi,"").trim().toLowerCase().localeCompare(Te.rawStat.replace(/[#+%]/gi,"").trim().toLowerCase()));case"count":return T.sort((be,Te)=>Te.passives.length-be.passives.length);case"rarity":return T.sort((be,Te)=>M[f.value][be.id]-M[f.value][Te.id]);case"value":return T.sort((be,Te)=>{const ge=it[be.id]||0,Re=it[Te.id]||0;return ge!=Re?Re-ge:M[f.value][be.id]-M[f.value][Te.id]})}return T},_e=[{label:"Count",value:"count"},{label:"Alphabetical",value:"alphabet"},{label:"Rarity",value:"rarity"},{label:"Value",value:"value"}];let Me=_e.find(T=>T.value===(localStorage.getItem("sortOrder")||"count")),ue=localStorage.getItem("colored")===null?!0:localStorage.getItem("colored")==="true",K=localStorage.getItem("split")===null?!0:localStorage.getItem("split")==="true";const x=T=>{if(T.type!=="paste")return;const be=(T.clipboardData||window.clipboardData).getData("text").split(`
`);if(be.length<14)return;const Te=_.find(We=>We.label===be[2]);if(!Te)return;let ge,Re;for(let We=10;We<be.length;We++)if(Re=Object.keys(se.TimelessJewelConquerors[Te.value]).find(kt=>be[We].indexOf(kt)>=0),Re){const kt=/(\d+)/.exec(be[We]);if(kt.length===0)continue;ge=parseInt(kt[1]);break}!Re||!ge||(l(5,W=!1),l(16,I="seed"),l(2,d=ge),l(0,f=Te),l(14,r={label:Re,value:Re}),C())};let oe=!1,ae=!1,De;const Be=()=>l(23,oe=!0);function Ge(T){ae=T,l(24,ae),l(6,Q),l(5,W),l(7,pe),l(8,ze),l(13,De)}const fe=()=>l(9,re=!re),Ie=()=>l(5,W=!W);function Ke(T){f=T,l(0,f)}function Fe(T){c=T,l(1,c)}const Pe=()=>P("seed"),Ve=()=>P("stats");function at(){d=et(this.value),l(2,d)}function ct(T){Me=T,l(10,Me)}const ht=()=>l(11,ue=!ue),ot=()=>l(12,K=!K),ut=T=>ee(d,T.passives),At=T=>ee(d,T.passives),S=T=>ee(d,T.passives);function dt(T){lt[T?"unshift":"push"](()=>{D=T,l(18,D)})}const mt=T=>H(w[T].id);function _t(T){w[T].min=et(this.value),l(4,w)}function Rt(T){w[T].weight=et(this.value),l(4,w)}function Lt(){he=et(this.value),l(19,he)}const Mt=()=>ve(),Pt=()=>l(23,oe=!1);return t.$$.update=()=>{t.$$.dirty[0]&1&&l(47,i=f?Object.keys(se.TimelessJewelConquerors[f.value]).map(T=>({value:T,label:T})):[]),t.$$.dirty[1]&65536&&l(27,n=i.concat([{value:"Any",label:"Any"}])),t.$$.dirty[0]&2&&(s=(c==null?void 0:c.value)==="Any"),t.$$.dirty[0]&2|t.$$.dirty[1]&65536&&l(14,r=(c==null?void 0:c.value)==="Any"?i[0]:c),t.$$.dirty[0]&8&&l(15,u=p?$l(Xe.nodes[p]).filter(T=>!T.isJewelSocket&&!T.isMastery):[]),t.$$.dirty[0]&49157&&l(26,a=!d||!f||!r||Object.keys(se.TimelessJewelConquerors[f.value]).indexOf(r.value)<0?[]:u.filter(T=>!!se.TreeToPassive[T.skill]).map(T=>({node:T.skill,result:Nl.Calculate(se.TreeToPassive[T.skill].Index,d,f.value,r.value)}))),t.$$.dirty[0]&1&&l(46,o=f?Object.keys(M[f.value]):[]),t.$$.dirty[0]&16|t.$$.dirty[1]&32768&&l(25,h=o.map(T=>{const le=parseInt(T);return{label:ft(le),value:le}}).filter(T=>!(T.value in w))),t.$$.dirty[0]&512&&localStorage.setItem("groupResults",re?"true":"false"),t.$$.dirty[0]&1024&&localStorage.setItem("sortOrder",Me.value),t.$$.dirty[0]&2048&&localStorage.setItem("colored",ue?"true":"false"),t.$$.dirty[0]&4096&&localStorage.setItem("split",K?"true":"false"),t.$$.dirty[0]&8672&&Q&&W&&(l(13,De=ls(pe,ze,Q.raw)),De.length===1&&l(24,ae=!1))},[f,c,d,p,w,W,Q,pe,ze,re,Me,ue,K,De,r,u,I,L,D,he,Ae,ce,U,oe,ae,h,a,n,_,C,P,z,B,H,$,ve,ee,ne,N,v,Z,ie,ye,_e,x,te,o,i,Be,Ge,fe,Ie,Ke,Fe,Pe,Ve,at,ct,ht,ot,ut,At,S,dt,mt,_t,Rt,Lt,Mt,Pt]}class di extends xe{constructor(e){super(),$e(this,e,ii,si,Ze,{colorKeys:45},null,[-1,-1,-1])}get colorKeys(){return this.$$.ctx[45]}}export{di as component};
